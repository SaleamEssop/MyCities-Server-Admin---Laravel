"use strict";(globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[]).push([[668],{7668:(e,l,t)=>{t.r(l),t.d(l,{default:()=>oe});t(8964);var a=t(9835),i=t(6970),u=t(499),n=t(8339),d=t(1569);const s=(e,l)=>d.api.get(`/v1/meters/${e}/cost-estimation`,{params:{month:l}}),r=new Intl.NumberFormat("en-US",{style:"decimal"}),o=()=>({numberFormat(e){return"number"!==typeof e?e:r.format(e)}}),v=new Intl.NumberFormat("en-US"),m=()=>({unitFormat(e){return"number"!==typeof e?e:`${v.format(e)} kL`},klToLitters(e){return"number"!==typeof e?e:`${v.format(1e3*e)} L`}}),c=1,_=1,w=e=>((0,a.dD)("data-v-0c0eb55c"),e=e(),(0,a.Cn)(),e),f={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},y={class:"large-text"},p={class:"medium-text"},g={class:"medium-text"},b={class:"medium-text"},k={key:0,class:"q-ma-sm q-pa-sm",style:{display:"flex","justify-content":"center","align-items":"center","min-height":"300px"}},U={class:"row flex justify-between items-center"},W={class:"column col-3"},h=w((()=>(0,a._)("b",{class:"text-center"},"Daily Usage",-1))),q={class:"text-center basic-text"},x={class:"text-center basic-text"},z={class:"column col-3"},S=w((()=>(0,a._)("b",{class:"text-center"},"Monthly Usage",-1))),F={class:"text-center basic-text"},j={class:"text-center basic-text"},R={class:"column col-3"},D=w((()=>(0,a._)("b",{class:"text-center"},"Daily Cost",-1))),Z={style:{"margin-bottom":"22px"},class:"basic-text text-center"},Q=(0,a.Uk)("Water in"),T=(0,a.Uk)("Water out"),C=(0,a.Uk)("VAT"),H=(0,a.Uk)("Water in"),I=(0,a.Uk)("Water out"),L=(0,a.Uk)("VAT"),Y={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},K=w((()=>(0,a._)("span",{class:"large-text"},"Monthly Projected Cost",-1))),M={class:"large-text"},$={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},A={class:"large-text"},B={class:"large-text"},N={class:"flex column items-center q-pt-lg","aria-label":"heading"},P=(0,a.Uk)("Email Details"),V={__name:"MeterCost",setup(e){const l=(0,n.yj)(),t=(0,n.tv)(),d=o(),r=m(),v=(0,u.iH)({}),w=(0,u.iH)(!1);let V=l.query.month;V<0&&t.replace({...l,query:{...l.query,month:1}});const E=(0,u.iH)(l.query.month||1);function G(){var e;null!==(e=v.value)&&void 0!==e&&e.has_history&&(E.value++,t.push({...l,query:{...l.query,month:E.value}}))}function J(){E.value--,t.push({...l,query:{...l.query,month:E.value}})}async function O(){try{v.value=await s(l.params.id,E.value),w.value=!1}catch(e){w.value=!0,v.value=e.response.data}}return(0,a.m0)((async()=>{E.value=l.query.month||1,await O()})),(0,a.bv)((()=>{O().then()})),(e,t)=>{var n,s,o,m;const V=(0,a.up)("q-btn"),O=(0,a.up)("q-toolbar-title"),X=(0,a.up)("q-toolbar"),ee=(0,a.up)("q-header"),le=(0,a.up)("q-icon"),te=(0,a.up)("q-card"),ae=(0,a.up)("q-banner"),ie=(0,a.up)("q-separator"),ue=(0,a.up)("q-item-section"),ne=(0,a.up)("q-item"),de=(0,a.up)("q-list");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(ee,{elevated:"",class:"containerWidth new-meter-heading breadcrumbs"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,null,{default:(0,a.w5)((()=>[(0,a.Wm)(V,{onClick:t[0]||(t[0]=l=>e.$router.back()),flat:"",dense:"",round:"",icon:"arrow_back","text-color":"white"}),(0,a.Wm)(O,{class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)((0,u.SU)(l).meta.title),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(te,{flat:"",class:"bg-grey-4 q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>{var e,l,t,u,n;return[(0,a._)("div",f,[(0,a._)("span",y,"Meter# "+(0,i.zw)(null===(e=v.value)||void 0===e||null===(l=e.meter_details)||void 0===l?void 0:l.meter_number),1),(0,a._)("div",p,[null!==(t=v.value)&&void 0!==t&&t.has_history?((0,a.wg)(),(0,a.j4)(le,{key:0,onClick:G,name:"arrow_left",class:"icon-styling"})):((0,a.wg)(),(0,a.j4)(le,{key:1,disabled:"",name:"arrow_left",class:"icon-styling"})),(0,a._)("span",null," Projected bill for "+(0,i.zw)(null===(u=v.value)||void 0===u?void 0:u.month),1),E.value>1?((0,a.wg)(),(0,a.j4)(le,{key:2,onClick:J,name:"arrow_right",class:"icon-styling"})):((0,a.wg)(),(0,a.j4)(le,{key:3,disabled:"",name:"arrow_right",class:"icon-styling"}))]),(0,a._)("span",g,(0,i.zw)(null===(n=v.value)||void 0===n?void 0:n.cycle),1),(0,a._)("span",b,"Today is "+(0,i.zw)(v.value.current_date),1)])]})),_:1}),w.value?((0,a.wg)(),(0,a.iD)("div",k,[(0,a.Wm)(ae,{dense:"","inline-actions":"",class:"text-white bg-red"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(v.value.message),1)])),_:1})])):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>{var e,l,t,n,s,o,m,c,_,w;return[(0,a._)("div",U,[(0,a._)("div",W,[h,(0,a._)("div",q,(0,i.zw)((0,u.SU)(r).unitFormat((null===(e=v.value)||void 0===e||null===(l=e.usage)||void 0===l?void 0:l.average_usage)||0)),1),(0,a._)("div",x,(0,i.zw)((0,u.SU)(r).klToLitters((null===(t=v.value)||void 0===t||null===(n=t.usage)||void 0===n?void 0:n.average_usage)||0)),1)]),(0,a.Wm)(ie,{vertical:""}),(0,a._)("div",z,[S,(0,a._)("div",F,(0,i.zw)((0,u.SU)(r).unitFormat((null===(s=v.value)||void 0===s||null===(o=s.usage)||void 0===o?void 0:o.predictive_monthly_usage)||0)),1),(0,a._)("div",j,(0,i.zw)((0,u.SU)(r).klToLitters((null===(m=v.value)||void 0===m||null===(c=m.usage)||void 0===c?void 0:c.predictive_monthly_usage)||0)),1)]),(0,a.Wm)(ie,{vertical:""}),(0,a._)("div",R,[D,(0,a._)("div",Z," R "+(0,i.zw)((0,u.SU)(d).numberFormat(0|(null===(_=v.value)||void 0===_||null===(w=_.data)||void 0===w?void 0:w.daily_predictive_cost))),1)])]),(0,a.Wm)(ie,{class:"q-mt-lg"})]})),_:1}),(null===(n=v.value)||void 0===n||null===(s=n.meter_details)||void 0===s?void 0:s.meter_type_id)===(0,u.SU)(c)?((0,a.wg)(),(0,a.j4)(te,{key:0,flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{bordered:"",separator:""},{default:(0,a.w5)((()=>{var e,l,t,n,s,r,o,m;return[(0,a.Wm)(ne,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[Q])),_:1}),(0,a.Wm)(ue,{side:""},{default:(0,a.w5)((()=>{var e,l,t;return[(0,a.Uk)("R "+(0,i.zw)((0,u.SU)(d).numberFormat((null===(e=v.value)||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.water_in)||void 0===t?void 0:t.predictive.total)||0)),1)]})),_:1})])),_:1}),(0,a.Wm)(ne,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[T])),_:1}),(0,a.Wm)(ue,{side:""},{default:(0,a.w5)((()=>{var e,l,t;return[(0,a.Uk)("R "+(0,i.zw)((0,u.SU)(d).numberFormat((null===(e=v.value)||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.water_out)||void 0===t?void 0:t.predictive.total)||0)),1)]})),_:1})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===(e=v.value)||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.water_in)||void 0===t||null===(n=t.predictive)||void 0===n?void 0:n.additional_costs)||[],((e,l)=>((0,a.wg)(),(0,a.j4)(ne,{class:"item-style",key:l},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(ue,{side:""},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,i.zw)((0,u.SU)(d).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===(s=v.value)||void 0===s||null===(r=s.data)||void 0===r||null===(o=r.water_out)||void 0===o||null===(m=o.predictive)||void 0===m?void 0:m.additional_costs)||[],((e,l)=>((0,a.wg)(),(0,a.j4)(ne,{class:"item-style",key:l},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(ue,{side:""},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,i.zw)((0,u.SU)(d).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128)),(0,a.Wm)(ne,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[C])),_:1}),(0,a.Wm)(ue,{side:""},{default:(0,a.w5)((()=>{var e,l;return[(0,a.Uk)("R "+(0,i.zw)((0,u.SU)(d).numberFormat((null===(e=v.value)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.vat_predictive)||0)),1)]})),_:1})])),_:1})]})),_:1})])),_:1})):(null===(o=v.value)||void 0===o||null===(m=o.meter_details)||void 0===m?void 0:m.meter_type_id)===(0,u.SU)(_)?((0,a.wg)(),(0,a.j4)(te,{key:1,flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{bordered:"",separator:""},{default:(0,a.w5)((()=>{var e,l,t,n,s,r,o,m;return[(0,a.Wm)(ne,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[H])),_:1}),(0,a.Wm)(ue,{side:""},{default:(0,a.w5)((()=>{var e,l,t;return[(0,a.Uk)("R "+(0,i.zw)((0,u.SU)(d).numberFormat((null===(e=v.value)||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.water_in)||void 0===t?void 0:t.predictive.total)||0)),1)]})),_:1})])),_:1}),(0,a.Wm)(ne,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[I])),_:1}),(0,a.Wm)(ue,{side:""},{default:(0,a.w5)((()=>{var e,l,t;return[(0,a.Uk)("R "+(0,i.zw)((0,u.SU)(d).numberFormat((null===(e=v.value)||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.water_out)||void 0===t?void 0:t.predictive.total)||0)),1)]})),_:1})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===(e=v.value)||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.water_in)||void 0===t||null===(n=t.predictive)||void 0===n?void 0:n.additional_costs)||[],((e,l)=>((0,a.wg)(),(0,a.j4)(ne,{class:"item-style",key:l},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(ue,{side:""},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,i.zw)((0,u.SU)(d).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===(s=v.value)||void 0===s||null===(r=s.data)||void 0===r||null===(o=r.water_out)||void 0===o||null===(m=o.predictive)||void 0===m?void 0:m.additional_costs)||[],((e,l)=>((0,a.wg)(),(0,a.j4)(ne,{class:"item-style",key:l},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(ue,{side:""},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,i.zw)((0,u.SU)(d).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128)),(0,a.Wm)(ne,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[L])),_:1}),(0,a.Wm)(ue,{side:""},{default:(0,a.w5)((()=>{var e,l;return[(0,a.Uk)("R "+(0,i.zw)((0,u.SU)(d).numberFormat((null===(e=v.value)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.vat_predictive)||0)),1)]})),_:1})])),_:1})]})),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(te,{flat:"",class:"bg-grey-4 q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>{var e,l;return[(0,a._)("div",Y,[K,(0,a._)("span",M,"R "+(0,i.zw)((0,u.SU)(d).numberFormat((null===(e=v.value)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.predictive)||0)),1)])]})),_:1}),(0,a.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>{var e,l,t;return[(0,a._)("div",$,[(0,a._)("span",A,"Dated: "+(0,i.zw)(null===(e=v.value)||void 0===e?void 0:e.current_date),1),(0,a._)("span",B,"Reading: "+(0,i.zw)(null===(l=v.value)||void 0===l||null===(t=l.usage)||void 0===t?void 0:t.reading),1)]),(0,a._)("div",N,[(0,a.Wm)(V,{color:"primary",style:{width:"100%"}},{default:(0,a.w5)((()=>[P])),_:1})])]})),_:1})],64))],64)}}};var E=t(1639),G=t(6602),J=t(1663),O=t(8879),X=t(1973),ee=t(4458),le=t(2857),te=t(7128),ae=t(926),ie=t(3246),ue=t(490),ne=t(1233),de=t(9984),se=t.n(de);const re=(0,E.Z)(V,[["__scopeId","data-v-0c0eb55c"]]),oe=re;se()(V,"components",{QHeader:G.Z,QToolbar:J.Z,QBtn:O.Z,QToolbarTitle:X.Z,QCard:ee.Z,QIcon:le.Z,QBanner:te.Z,QSeparator:ae.Z,QList:ie.Z,QItem:ue.Z,QItemSection:ne.Z})}}]);