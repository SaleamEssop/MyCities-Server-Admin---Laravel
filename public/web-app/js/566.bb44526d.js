"use strict";(globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[]).push([[566],{1566:(e,a,o)=>{o.r(a),o.d(a,{default:()=>se});var l=o(9835);const s=(0,l._)("div",{class:"q-ma-sm"},[(0,l._)("b",null,"Note:"),(0,l.Uk)(" By signing up you agree to our terms of use and privacy policy ")],-1);function t(e,a,o,t,n,i){const r=(0,l.up)("q-tab"),d=(0,l.up)("q-tabs"),m=(0,l.up)("AuthComponent"),u=(0,l.up)("q-tab-panel"),c=(0,l.up)("q-tab-panels"),p=(0,l.up)("q-card"),w=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(w,{class:"flex q-pa-md justify-center items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{style:{width:"100%","max-width":"450px"},class:"no-shadow"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tab=a),dense:"",class:"text-grey-7 bg-grey-3","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":"","active-bg-color":"white"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"login",label:"Sign in"}),(0,l.Wm)(r,{name:"register",label:"Sign up"})])),_:1},8,["modelValue"]),(0,l.Wm)(c,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tab=a),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"login",class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{tab:e.tab},null,8,["tab"])])),_:1}),(0,l.Wm)(u,{name:"register",class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{tab:e.tab},null,8,["tab"]),s])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}const n={class:""},i={class:"full-width col"},r={class:"full-width q-pa-lg"},d={class:"full-width"},m=["innerHTML"],u={class:"full-width"},c={key:0},p={class:"row"},w={key:1},f={class:"row"},g={class:"row"};function b(e,a,o,s,t,b){const h=(0,l.up)("q-input"),y=(0,l.up)("q-icon"),P=(0,l.up)("q-checkbox"),v=(0,l.up)("q-btn"),q=(0,l.up)("q-space"),_=(0,l.up)("q-form"),V=(0,l.up)("ForgotPassword"),C=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",i,[(0,l._)("div",r,[(0,l._)("div",d,[(0,l._)("div",{innerHTML:e.title,class:"text-h5 q-mb-lg"},null,8,m)]),(0,l._)("div",u,[(0,l.Wm)(_,{onSubmit:e.submitForm},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{outlined:"",class:"q-mb-md",type:"email",label:"Email",modelValue:e.formData.email,"onUpdate:modelValue":a[0]||(a[0]=a=>e.formData.email=a),"input-style":{fontSize:"18px"}},null,8,["modelValue"]),(0,l.Wm)(h,{class:"q-mb-md",label:"Password",outlined:"",modelValue:e.formData.password,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.password=a),type:e.isPwd?"password":"text",ref:"checkPassword","input-style":{fontSize:"18px"},rules:e.Required},{append:(0,l.w5)((()=>[(0,l.Wm)(y,{name:e.isPwd?"visibility_off":"visibility",onClick:a[1]||(a[1]=a=>e.isPwd=!e.isPwd),class:"cursor-pointer"},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),e.isLogin?((0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("div",p,[(0,l.Wm)(P,{modelValue:e.agreeToTCs,"onUpdate:modelValue":a[3]||(a[3]=a=>e.agreeToTCs=a),label:"Agree our T&Cs"},null,8,["modelValue"])]),(0,l.Wm)(v,{"no-caps":"",class:"readTerms",color:"blue-8",flat:"",label:"Read our Term & Conditions",style:{"padding-left":"6px"},onClick:a[4]||(a[4]=a=>e.readTerms())})])):(0,l.kq)("",!0),e.isLogin?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",w,[(0,l.Wm)(h,{class:"q-mb-md",label:"Confirm Password",outlined:"",modelValue:e.formData.confirmPassword,"onUpdate:modelValue":a[6]||(a[6]=a=>e.formData.confirmPassword=a),type:e.isConfirmPwd?"password":"text",ref:"checkConfirmPassword",rules:e.confirmPWD,"input-style":{fontSize:"18px"}},{append:(0,l.w5)((()=>[(0,l.Wm)(y,{name:e.isConfirmPwd?"visibility_off":"visibility",onClick:a[5]||(a[5]=a=>e.isConfirmPwd=!e.isConfirmPwd),class:"cursor-pointer"},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,l.Wm)(h,{outlined:"",class:"q-mb-md",type:"text",label:"Full Name",modelValue:e.formData.full_name,"onUpdate:modelValue":a[7]||(a[7]=a=>e.formData.full_name=a),"input-style":{fontSize:"18px"}},null,8,["modelValue"]),(0,l.Wm)(h,{outlined:"",class:"q-mb-md",type:"tel",label:"Phone number",modelValue:e.formData.phone_number,"onUpdate:modelValue":a[8]||(a[8]=a=>e.formData.phone_number=a),"input-style":{fontSize:"18px"}},null,8,["modelValue"]),(0,l._)("div",f,[(0,l.Wm)(P,{modelValue:e.agreeToTCs,"onUpdate:modelValue":a[9]||(a[9]=a=>e.agreeToTCs=a),label:"Agree our T&Cs"},null,8,["modelValue"])]),(0,l.Wm)(v,{"no-caps":"",class:"readTerms",color:"blue-8",flat:"",label:"Read our Term & Conditions",style:{"padding-left":"6px"},onClick:a[10]||(a[10]=a=>e.readTerms())})])),(0,l._)("div",g,[(0,l.Wm)(v,{type:"submit",color:"primary","text-color":"black",label:e.title,unelevated:""},null,8,["label"]),(0,l.Wm)(q),"register"!==e.tab?((0,l.wg)(),(0,l.j4)(v,{key:0,flat:"",label:"Forgot Password?",color:"grey-7",class:"q-px-none","no-caps":"",onClick:e.forgotPassword},null,8,["onClick"])):(0,l.kq)("",!0)])])),_:1},8,["onSubmit"])])])]),(0,l.Wm)(C,{modelValue:e.resetPwdDialog,"onUpdate:modelValue":a[11]||(a[11]=a=>e.resetPwdDialog=a),"full-width":!0,persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V)])),_:1},8,["modelValue"])])}var h=o(1957);const y={class:"flex flex-center"},P=(0,l._)("div",{class:"text-h6"},"Reset Password",-1),v={class:"row q-mt-xs"};function q(e,a,o,s,t,n){const i=(0,l.up)("q-space"),r=(0,l.up)("q-btn"),d=(0,l.up)("q-card-section"),m=(0,l.up)("q-input"),u=(0,l.up)("q-icon"),c=(0,l.up)("q-form"),p=(0,l.up)("q-card-actions"),w=(0,l.up)("q-card"),f=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",y,[(0,l.Wm)(w,{style:{width:"500px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[P,(0,l.Wm)(i),(0,l.wy)((0,l.Wm)(r,{icon:"close",flat:"",round:"",dense:"",onClick:e.closeModal},null,8,["onClick"]),[[f,e.closed]])])),_:1}),(0,l.Wm)(d,{class:"q-pt-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{ref:"resetPasswordForm"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{type:"email",modelValue:e.form.email,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.email=a),"input-style":{fontSize:"18px"},label:"Enter your email","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type your email"]},null,8,["modelValue","rules"]),(0,l.wy)((0,l.Wm)(m,{class:"text-center q-mt-md q-mb-lg",borderless:"",modelValue:e.form.code,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.code=a),"input-style":{fontSize:"30px",textAlign:"center"},mask:"#   #   #   #   #","fill-mask":""},null,8,["modelValue"]),[[h.F8,e.verifyCode]]),(0,l.wy)((0,l.Wm)(m,{class:"q-mb-md",label:"Enter New Password","lazy-rules":"",modelValue:e.form.newPassword,"onUpdate:modelValue":a[3]||(a[3]=a=>e.form.newPassword=a),type:e.isPwd?"password":"text","input-style":{fontSize:"18px"},rules:[e=>e&&e.length>0||"Please type your password"]},{append:(0,l.w5)((()=>[(0,l.Wm)(u,{name:e.isPwd?"visibility_off":"visibility",onClick:a[2]||(a[2]=a=>e.isPwd=!e.isPwd),class:"cursor-pointer"},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),[[h.F8,e.isResetPassword]])])),_:1},512),(0,l.Wm)(p,{align:"right"},{default:(0,l.w5)((()=>[(0,l._)("div",v,[(0,l.wy)((0,l.Wm)(r,{class:"q-px-md",label:"Reset my password",color:"primary",onClick:a[4]||(a[4]=a=>e.resetPassword()),unelevated:"","text-color":"black"},null,512),[[f,e.closed]])])])),_:1})])),_:1})])),_:1})])}o(8964),o(2809);var _=o(499),V=o(9302),C=o(1569);const W=(0,l.aZ)({name:"ForgotPassword",setup(){const e=(0,V.Z)(),a=(0,_.qj)({email:"",code:null,newPassword:""}),o=(0,_.iH)(!1),l=(0,_.iH)(!1),s=(0,_.iH)(!0),t=(0,_.iH)(!1),n=()=>{if(e.loading.show(),!1===o.value&&!1===l.value)(0,C.forgotPasswordVerification)({email:a.email}).then((({status:a,code:l,msg:s})=>{if(!a)throw{code:l,msg:s};e.loading.hide(),o.value=!0,e.notify({message:"Check your email and Enter the Verification code here."})})).catch((a=>{e.loading.hide(),e.notify({message:a.msg})}));else if(!0===o.value){let s=a.code.replaceAll(" ","");(0,C.forgotPasswordVerificationCode)({code:s,email:a.email}).then((({status:a,code:s,msg:t})=>{if(!a)throw{code:s,msg:t};o.value=!1,l.value=!0,e.loading.hide(),e.notify({message:t})})).catch((a=>{e.loading.hide(),e.notify({message:a.msg})}))}else!0===l.value&&!1===o.value&&((0,C.resetNewPassword)({email:a.email,password:a.newPassword}).then((({status:a,code:o,msg:l})=>{if(!a)throw{code:o,msg:l};t.value=!0,e.loading.hide(),e.notify({message:"Password has been Reset, login here with new Password"})})).catch((a=>{e.loading.hide(),e.notify({message:a.msg})})),t.value=!0)};function i(){t.value=!0}return{form:a,resetPassword:n,verifyCode:o,isPwd:s,isResetPassword:l,closed:t,closeModal:i}}});var k=o(1639),x=o(4458),Z=o(3190),T=o(136),Q=o(8879),D=o(8326),S=o(6611),U=o(2857),F=o(1821),H=o(2146),A=o(9984),z=o.n(A);const L=(0,k.Z)(W,[["render",q]]),R=L;z()(W,"components",{QCard:x.Z,QCardSection:Z.Z,QSpace:T.Z,QBtn:Q.Z,QForm:D.Z,QInput:S.Z,QIcon:U.Z,QCardActions:F.Z}),z()(W,"directives",{ClosePopup:H.Z});var j=o(8339),I=o(6144),B=o(8083);const E=(0,l.aZ)({name:"AuthComponent",props:["tab"],components:{ForgotPassword:R},setup(e,a){const o=(0,V.Z)(),s=(0,j.tv)(),t=(0,I.L)(),n=(0,_.qj)({full_name:"",email:"",phone_number:"",password:"",confirmPassword:"",action:"insert"}),i=(0,_.iH)(!0),r=(0,_.iH)(!0),d=(0,_.iH)(!1),m=(0,l.Fl)((()=>"login"===e.tab?"Sign in":"Sign up")),u=(0,l.Fl)((()=>"login"===e.tab)),c=(0,_.iH)(!1),p=()=>{"login"===e.tab?g(n.email,n.password):b(n)},w=()=>{let e="https://docs.google.com/document/d/1R1Ogorbm106ux-4BY5FPQVsBeVHLQDbOD4LejdftTsw/edit?usp=sharing";window.open(e,"_blank")},f=e=>{let a;switch(e.code){case"auth/wrong-password":a="Wrong Password";break;case"auth/user-not-found":a="User does not found";break;default:a=e.msg}return a},g=(e,a)=>{d.value?(o.loading.show(),(0,C.userLogin)({email:e,password:a}).then((async({status:e,code:a,msg:l,data:n,token:i})=>{if(!e)throw{code:a,msg:l};o.notify({message:"Signed in"}),t.setUser(n,i),s.push("/"),await(0,B.updateAllData)(),o.loading.hide()})).catch((e=>{o.notify({message:f(e)}),o.loading.hide(),console.log(e)}))):o.notify("Please agree to the terms and conditions")},b=e=>{e.password===e.confirmPassword?d.value?(o.loading.show(),(0,C.userSignUp)(e).then((({status:a,code:l,msg:s})=>{if(!a)throw{code:l,msg:s};g(e.email,e.password),o.loading.hide()})).catch((e=>{o.notify({message:f(e)}),console.log(e),o.loading.hide()}))):o.notify("Please agree to the terms and conditions"):o.notify("Your password and confirmation password do not match")},h=()=>{c.value=!0};return{formData:n,isConfirmPwd:r,resetPwdDialog:c,submitForm:p,signInExistingUser:g,createUser:b,forgotPassword:h,title:m,isLogin:u,isPwd:i,agreeToTCs:d,readTerms:w}}});var M=o(1221),N=o(1357),O=o(1487),Y=o(2074);const G=(0,k.Z)(E,[["render",b],["__scopeId","data-v-3b9aa02a"]]),J=G;z()(E,"components",{QForm:D.Z,QInput:S.Z,QIcon:U.Z,QCheckbox:M.Z,QBtn:Q.Z,QSpace:T.Z,QAvatar:N.Z,QImg:O.Z,QDialog:Y.Z});const K=(0,l.aZ)({components:{AuthComponent:J},name:"AuthPage",setup(){const e=(0,_.iH)("login");return{tab:e}}});var X=o(9885),$=o(7817),ee=o(900),ae=o(9800),oe=o(4106);const le=(0,k.Z)(K,[["render",t]]),se=le;z()(K,"components",{QPage:X.Z,QCard:x.Z,QTabs:$.Z,QTab:ee.Z,QTabPanels:ae.Z,QTabPanel:oe.Z})}}]);