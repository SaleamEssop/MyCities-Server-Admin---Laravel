(globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[]).push([[478],{6478:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>re});var s=o(9835),l=o(7009),t=o.n(l);const n=e=>((0,s.dD)("data-v-6acffbfa"),e=e(),(0,s.Cn)(),e),i=n((()=>(0,s._)("img",{src:t(),alt:""},null,-1))),r=n((()=>(0,s._)("div",{class:"q-ma-sm"},[(0,s._)("b",null,"Note:"),(0,s.Uk)(" By signing up you agree to our terms of use and privacy policy ")],-1)));function d(e,a,o,l,t,n){const d=(0,s.up)("q-tab"),m=(0,s.up)("q-tabs"),u=(0,s.up)("AuthComponent"),c=(0,s.up)("q-tab-panel"),p=(0,s.up)("q-tab-panels"),w=(0,s.up)("q-card"),f=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(f,{class:"flex column q-pa-md justify-center items-center"},{default:(0,s.w5)((()=>[i,(0,s.Wm)(w,{class:"login-card",style:{width:"100%","max-width":"450px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tab=a),dense:"",class:"text-grey-7 bg-grey-3","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":"","active-bg-color":"white"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{name:"login",label:"Sign in"}),(0,s.Wm)(d,{name:"register",label:"Sign up"})])),_:1},8,["modelValue"]),(0,s.Wm)(p,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tab=a),animated:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{name:"login",class:"q-pa-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{tab:e.tab},null,8,["tab"])])),_:1}),(0,s.Wm)(c,{name:"register",class:"q-pa-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{tab:e.tab},null,8,["tab"]),r])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}const m={class:""},u={class:"full-width col"},c={class:"full-width q-pa-lg"},p={class:"full-width"},w=["innerHTML"],f={class:"full-width"},g={key:0},b={class:"row q-mb-sm"},h={key:1},y={class:"row q-mb-sm"},P={class:"row column justify-center"};function v(e,a,o,l,t,n){const i=(0,s.up)("q-input"),r=(0,s.up)("q-icon"),d=(0,s.up)("q-checkbox"),v=(0,s.up)("q-btn"),_=(0,s.up)("q-space"),q=(0,s.up)("q-form"),V=(0,s.up)("ForgotPassword"),C=(0,s.up)("q-dialog");return(0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",u,[(0,s._)("div",c,[(0,s._)("div",p,[(0,s._)("div",{innerHTML:e.title,class:"text-h5 q-mb-lg"},null,8,w)]),(0,s._)("div",f,[(0,s.Wm)(q,{onSubmit:e.submitForm},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{outlined:"",class:"q-mb-md",type:"email",label:"Email",modelValue:e.formData.email,"onUpdate:modelValue":a[0]||(a[0]=a=>e.formData.email=a),"input-style":{fontSize:"18px"}},null,8,["modelValue"]),(0,s.Wm)(i,{class:"q-mb-md",label:"Password",outlined:"",modelValue:e.formData.password,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.password=a),type:e.isPwd?"password":"text",ref:"checkPassword","input-style":{fontSize:"18px"},rules:e.Required},{append:(0,s.w5)((()=>[(0,s.Wm)(r,{name:e.isPwd?"visibility_off":"visibility",onClick:a[1]||(a[1]=a=>e.isPwd=!e.isPwd),class:"cursor-pointer"},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),e.isLogin?((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",b,[(0,s.Wm)(d,{modelValue:e.agreeToTCs,"onUpdate:modelValue":a[3]||(a[3]=a=>e.agreeToTCs=a),label:"Agree our T&Cs."},null,8,["modelValue"]),(0,s._)("span",{class:"readTerms",onClick:a[4]||(a[4]=a=>e.readTerms()),style:{"padding-left":"6px"}},"Read Here")])])):(0,s.kq)("",!0),e.isLogin?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",h,[(0,s.Wm)(i,{class:"q-mb-md",label:"Confirm Password",outlined:"",modelValue:e.formData.confirmPassword,"onUpdate:modelValue":a[6]||(a[6]=a=>e.formData.confirmPassword=a),type:e.isConfirmPwd?"password":"text",ref:"checkConfirmPassword",rules:e.confirmPWD,"input-style":{fontSize:"18px"}},{append:(0,s.w5)((()=>[(0,s.Wm)(r,{name:e.isConfirmPwd?"visibility_off":"visibility",onClick:a[5]||(a[5]=a=>e.isConfirmPwd=!e.isConfirmPwd),class:"cursor-pointer"},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,s.Wm)(i,{outlined:"",class:"q-mb-md",type:"text",label:"Full Name",modelValue:e.formData.full_name,"onUpdate:modelValue":a[7]||(a[7]=a=>e.formData.full_name=a),"input-style":{fontSize:"18px"}},null,8,["modelValue"]),(0,s.Wm)(i,{outlined:"",class:"q-mb-md",type:"tel",label:"Phone number",modelValue:e.formData.phone_number,"onUpdate:modelValue":a[8]||(a[8]=a=>e.formData.phone_number=a),"input-style":{fontSize:"18px"}},null,8,["modelValue"]),(0,s._)("div",y,[(0,s.Wm)(d,{modelValue:e.agreeToTCs,"onUpdate:modelValue":a[9]||(a[9]=a=>e.agreeToTCs=a),label:"Agree our T&Cs."},null,8,["modelValue"]),(0,s._)("span",{class:"readTerms",onClick:a[10]||(a[10]=a=>e.readTerms()),style:{"padding-left":"6px"}},"Read Here")])])),(0,s._)("div",P,[(0,s.Wm)(v,{type:"submit",color:"primary","text-color":"white",label:e.title,unelevated:""},null,8,["label"]),(0,s.Wm)(_),"register"!==e.tab?((0,s.wg)(),(0,s.j4)(v,{key:0,flat:"",label:"Forgot Password?",color:"grey-7",class:"q-px-none q-mt-sm","no-caps":"",onClick:e.forgotPassword},null,8,["onClick"])):(0,s.kq)("",!0)])])),_:1},8,["onSubmit"])])])]),(0,s.Wm)(C,{modelValue:e.resetPwdDialog,"onUpdate:modelValue":a[11]||(a[11]=a=>e.resetPwdDialog=a),"full-width":!0,persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(V)])),_:1},8,["modelValue"])])}var _=o(1957);const q={class:"flex flex-center"},V=(0,s._)("div",{class:"text-h6"},"Reset Password",-1),C={class:"row q-mt-xs"};function W(e,a,o,l,t,n){const i=(0,s.up)("q-space"),r=(0,s.up)("q-btn"),d=(0,s.up)("q-card-section"),m=(0,s.up)("q-input"),u=(0,s.up)("q-icon"),c=(0,s.up)("q-form"),p=(0,s.up)("q-card-actions"),w=(0,s.up)("q-card"),f=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)("div",q,[(0,s.Wm)(w,{style:{width:"500px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{class:"row items-center q-pb-none"},{default:(0,s.w5)((()=>[V,(0,s.Wm)(i),(0,s.wy)((0,s.Wm)(r,{icon:"close",flat:"",round:"",dense:"",onClick:e.closeModal},null,8,["onClick"]),[[f,e.closed]])])),_:1}),(0,s.Wm)(d,{class:"q-pt-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{ref:"resetPasswordForm"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{type:"email",modelValue:e.form.email,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.email=a),"input-style":{fontSize:"18px"},label:"Enter your email","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type your email"]},null,8,["modelValue","rules"]),(0,s.wy)((0,s.Wm)(m,{class:"text-center q-mt-md q-mb-lg",borderless:"",modelValue:e.form.code,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.code=a),"input-style":{fontSize:"30px",textAlign:"center"},mask:"#   #   #   #   #","fill-mask":""},null,8,["modelValue"]),[[_.F8,e.verifyCode]]),(0,s.wy)((0,s.Wm)(m,{class:"q-mb-md",label:"Enter New Password","lazy-rules":"",modelValue:e.form.newPassword,"onUpdate:modelValue":a[3]||(a[3]=a=>e.form.newPassword=a),type:e.isPwd?"password":"text","input-style":{fontSize:"18px"},rules:[e=>e&&e.length>0||"Please type your password"]},{append:(0,s.w5)((()=>[(0,s.Wm)(u,{name:e.isPwd?"visibility_off":"visibility",onClick:a[2]||(a[2]=a=>e.isPwd=!e.isPwd),class:"cursor-pointer"},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),[[_.F8,e.isResetPassword]])])),_:1},512),(0,s.Wm)(p,{align:"right"},{default:(0,s.w5)((()=>[(0,s._)("div",C,[(0,s.wy)((0,s.Wm)(r,{class:"q-px-md",label:"Reset my password",color:"primary",onClick:a[4]||(a[4]=a=>e.resetPassword()),unelevated:"","text-color":"white"},null,512),[[f,e.closed]])])])),_:1})])),_:1})])),_:1})])}o(8964),o(2809);var x=o(499),k=o(9302),Z=o(1569);const Q=(0,s.aZ)({name:"ForgotPassword",setup(){const e=(0,k.Z)(),a=(0,x.qj)({email:"",code:null,newPassword:""}),o=(0,x.iH)(!1),s=(0,x.iH)(!1),l=(0,x.iH)(!0),t=(0,x.iH)(!1),n=()=>{if(e.loading.show(),!1===o.value&&!1===s.value)(0,Z.forgotPasswordVerification)({email:a.email}).then((({status:a,code:s,msg:l})=>{if(!a)throw{code:s,msg:l};e.loading.hide(),o.value=!0,e.notify({message:"Check your email and Enter the Verification code here."})})).catch((a=>{e.loading.hide(),e.notify({message:a.msg})}));else if(!0===o.value){let l=a.code.replaceAll(" ","");(0,Z.forgotPasswordVerificationCode)({code:l,email:a.email}).then((({status:a,code:l,msg:t})=>{if(!a)throw{code:l,msg:t};o.value=!1,s.value=!0,e.loading.hide(),e.notify({message:t})})).catch((a=>{e.loading.hide(),e.notify({message:a.msg})}))}else!0===s.value&&!1===o.value&&((0,Z.resetNewPassword)({email:a.email,password:a.newPassword}).then((({status:a,code:o,msg:s})=>{if(!a)throw{code:o,msg:s};t.value=!0,e.loading.hide(),e.notify({message:"Password has been Reset, login here with new Password"})})).catch((a=>{e.loading.hide(),e.notify({message:a.msg})})),t.value=!0)};function i(){t.value=!0}return{form:a,resetPassword:n,verifyCode:o,isPwd:l,isResetPassword:s,closed:t,closeModal:i}}});var T=o(1639),D=o(4458),S=o(3190),U=o(136),F=o(8879),H=o(8326),A=o(6611),z=o(2857),L=o(1821),R=o(2146),j=o(9984),I=o.n(j);const B=(0,T.Z)(Q,[["render",W]]),E=B;I()(Q,"components",{QCard:D.Z,QCardSection:S.Z,QSpace:U.Z,QBtn:F.Z,QForm:H.Z,QInput:A.Z,QIcon:z.Z,QCardActions:L.Z}),I()(Q,"directives",{ClosePopup:R.Z});var M=o(8339),N=o(6144),O=o(8083);const Y=(0,s.aZ)({name:"AuthComponent",props:["tab"],components:{ForgotPassword:E},setup(e,a){const o=(0,k.Z)(),l=(0,M.tv)(),t=(0,N.L)(),n=(0,x.qj)({full_name:"",email:"",phone_number:"",password:"",confirmPassword:"",action:"insert"}),i=(0,x.iH)(!0),r=(0,x.iH)(!0),d=(0,x.iH)(!1),m=(0,s.Fl)((()=>"login"===e.tab?"Sign in":"Sign up")),u=(0,s.Fl)((()=>"login"===e.tab)),c=(0,x.iH)(!1),p=()=>{"login"===e.tab?g(n.email,n.password):b(n)},w=()=>{let e="https://docs.google.com/document/d/1R1Ogorbm106ux-4BY5FPQVsBeVHLQDbOD4LejdftTsw/edit?usp=sharing";window.open(e,"_blank")},f=e=>{let a;switch(e.code){case"auth/wrong-password":a="Wrong Password";break;case"auth/user-not-found":a="User does not found";break;default:a=e.msg}return a},g=(e,a)=>{d.value?(o.loading.show(),(0,Z.userLogin)({email:e,password:a}).then((async({status:e,code:a,msg:s,data:n,token:i})=>{if(!e)throw{code:a,msg:s};o.notify({message:"Signed in"}),t.setUser(n,i),l.push("/"),await(0,O.updateAllData)(),o.loading.hide()})).catch((e=>{o.notify({message:f(e)}),o.loading.hide(),console.log(e)}))):o.notify("Please agree to the terms and conditions")},b=e=>{e.password===e.confirmPassword?d.value?(o.loading.show(),(0,Z.userSignUp)(e).then((({status:a,code:s,msg:l})=>{if(!a)throw{code:s,msg:l};g(e.email,e.password),o.loading.hide()})).catch((e=>{o.notify({message:f(e)}),console.log(e),o.loading.hide()}))):o.notify("Please agree to the terms and conditions"):o.notify("Your password and confirmation password do not match")},h=()=>{c.value=!0};return{formData:n,isConfirmPwd:r,resetPwdDialog:c,submitForm:p,signInExistingUser:g,createUser:b,forgotPassword:h,title:m,isLogin:u,isPwd:i,agreeToTCs:d,readTerms:w}}});var G=o(1221),J=o(1357),K=o(1487),X=o(2074);const $=(0,T.Z)(Y,[["render",v],["__scopeId","data-v-405f2994"]]),ee=$;I()(Y,"components",{QForm:H.Z,QInput:A.Z,QIcon:z.Z,QCheckbox:G.Z,QBtn:F.Z,QSpace:U.Z,QAvatar:J.Z,QImg:K.Z,QDialog:X.Z});const ae=(0,s.aZ)({components:{AuthComponent:ee},name:"AuthPage",setup(){const e=(0,x.iH)("login");return{tab:e}}});var oe=o(9885),se=o(7817),le=o(900),te=o(9800),ne=o(4106);const ie=(0,T.Z)(ae,[["render",d],["__scopeId","data-v-6acffbfa"]]),re=ie;I()(ae,"components",{QPage:oe.Z,QCard:D.Z,QTabs:se.Z,QTab:le.Z,QTabPanels:te.Z,QTabPanel:ne.Z})},7009:(e,a,o)=>{e.exports=o.p+"img/MyCity.3cdf977c.png"}}]);