"use strict";(globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[]).push([[242],{3242:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ne});var l=a(9835),i=a(6970),s=a(499),n=a(8339),u=a(1569);const r=(e,t)=>u.api.get(`/v1/meters/${e}/cost-estimation`,{params:{month:t}}),o=new Intl.NumberFormat("en-US",{style:"decimal"}),d=()=>({numberFormat(e){return"number"!==typeof e?e:o.format(e)}}),c=new Intl.NumberFormat("en-US"),m=()=>({unitFormat(e){return"number"!==typeof e?e:`${c.format(e)} kL`},klToLitters(e){return"number"!==typeof e?e:`${c.format(1e3*e)} L`}}),v=e=>((0,l.dD)("data-v-30ae4c52"),e=e(),(0,l.Cn)(),e),_={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},w={class:"large-text"},p={class:"medium-text"},f={class:"medium-text"},g={class:"medium-text"},y={class:"row flex justify-between items-center"},b={class:"column col-3"},h=v((()=>(0,l._)("b",{class:"text-center"},"Daily Usage",-1))),x={class:"text-center basic-text"},k={class:"text-center basic-text"},q={class:"column col-3"},W=v((()=>(0,l._)("b",{class:"text-center"},"Monthly Usage",-1))),U={class:"text-center basic-text"},z={class:"text-center basic-text"},S={class:"column col-3"},F=v((()=>(0,l._)("b",{class:"text-center"},"Daily Cost",-1))),Z={style:{"margin-bottom":"22px"},class:"basic-text text-center"},j=(0,l.Uk)("Water in"),Q=(0,l.Uk)("Water out"),T=(0,l.Uk)("VAT"),C={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},D=v((()=>(0,l._)("span",{class:"large-text"},"Monthly Projected Cost",-1))),H={class:"large-text"},R={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},I={class:"large-text"},L={class:"large-text"},Y={class:"flex column items-center q-pt-lg","aria-label":"heading"},M=(0,l.Uk)("Email Details"),$={key:1,class:"q-ma-sm q-pa-sm",style:{display:"flex","justify-content":"center","align-items":"center","min-height":"300px"}},B=(0,l.Uk)(" You have lost connection to the internet. This app is offline. adsa asdas dsadsa das "),K={__name:"MeterCost",setup(e){const t=(0,n.yj)(),a=(0,n.tv)(),u=d(),o=m(),c=(0,s.iH)({}),v=(0,s.iH)(t.query.month||1),K=(0,s.iH)(!1);function N(){var e;null!==(e=c.value)&&void 0!==e&&e.has_history&&(v.value++,a.push({...t,query:{...t.query,month:v.value}}))}function P(){v.value--,a.push({...t,query:{...t.query,month:v.value}})}async function A(){await r(t.params.id,v.value).then((e=>{c.value=e,K.value=!1})).catch((e=>{e.value=!0,c.value=e.response.data}))}return(0,l.m0)((()=>{v.value=t.query.month||1,A()})),(0,l.bv)((()=>{A().then()})),(e,a)=>{const n=(0,l.up)("q-btn"),r=(0,l.up)("q-toolbar-title"),d=(0,l.up)("q-toolbar"),m=(0,l.up)("q-header"),K=(0,l.up)("q-icon"),A=(0,l.up)("q-card"),E=(0,l.up)("q-separator"),V=(0,l.up)("q-item-section"),G=(0,l.up)("q-item"),J=(0,l.up)("q-list"),O=(0,l.up)("q-banner");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(m,{elevated:"",class:"containerWidth new-meter-heading breadcrumbs"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{onClick:a[0]||(a[0]=t=>e.$router.back()),flat:"",dense:"",round:"",icon:"arrow_back","text-color":"white"}),(0,l.Wm)(r,{class:"text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)((0,s.SU)(t).meta.title),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(A,{flat:"",class:"bg-grey-4 q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>{var e,t,a,s,n;return[(0,l._)("div",_,[(0,l._)("span",w,"Meter# "+(0,i.zw)(null===(e=c.value)||void 0===e||null===(t=e.meter_details)||void 0===t?void 0:t.meter_number),1),(0,l._)("div",p,[null!==(a=c.value)&&void 0!==a&&a.has_history?((0,l.wg)(),(0,l.j4)(K,{key:0,onClick:N,name:"arrow_left",class:"icon-styling"})):((0,l.wg)(),(0,l.j4)(K,{key:1,disabled:"",name:"arrow_left",class:"icon-styling"})),(0,l._)("span",null," Projected bill for "+(0,i.zw)(null===(s=c.value)||void 0===s?void 0:s.month),1),1!==v.value?((0,l.wg)(),(0,l.j4)(K,{key:2,onClick:P,name:"arrow_right",class:"icon-styling"})):((0,l.wg)(),(0,l.j4)(K,{key:3,disabled:"",name:"arrow_right",class:"icon-styling"}))]),(0,l._)("span",f,(0,i.zw)(null===(n=c.value)||void 0===n?void 0:n.cycle),1),(0,l._)("span",g,"Today is "+(0,i.zw)(c.value.current_date),1)])]})),_:1}),c.value.message?((0,l.wg)(),(0,l.iD)("div",$,[(0,l.Wm)(O,{dense:"","inline-actions":"",class:"text-white bg-red"},{default:(0,l.w5)((()=>[B])),_:1})])):((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Wm)(A,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>{var e,t,a,n,r,d,m,v,_,w;return[(0,l._)("div",y,[(0,l._)("div",b,[h,(0,l._)("div",x,(0,i.zw)((0,s.SU)(o).unitFormat((null===(e=c.value)||void 0===e||null===(t=e.usage)||void 0===t?void 0:t.average_usage)||0)),1),(0,l._)("div",k,(0,i.zw)((0,s.SU)(o).klToLitters((null===(a=c.value)||void 0===a||null===(n=a.usage)||void 0===n?void 0:n.average_usage)||0)),1)]),(0,l.Wm)(E,{vertical:""}),(0,l._)("div",q,[W,(0,l._)("div",U,(0,i.zw)((0,s.SU)(o).unitFormat((null===(r=c.value)||void 0===r||null===(d=r.usage)||void 0===d?void 0:d.predictive_monthly_usage)||0)),1),(0,l._)("div",z,(0,i.zw)((0,s.SU)(o).klToLitters((null===(m=c.value)||void 0===m||null===(v=m.usage)||void 0===v?void 0:v.predictive_monthly_usage)||0)),1)]),(0,l.Wm)(E,{vertical:""}),(0,l._)("div",S,[F,(0,l._)("div",Z," R "+(0,i.zw)((0,s.SU)(u).numberFormat(0|(null===(_=c.value)||void 0===_||null===(w=_.data)||void 0===w?void 0:w.daily_predictive_cost))),1)])]),(0,l.Wm)(E,{class:"q-mt-lg"})]})),_:1}),(0,l.Wm)(A,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,{bordered:"",separator:""},{default:(0,l.w5)((()=>{var e,t,a,n,r,o,d,m;return[(0,l.Wm)(G,{class:"item-style"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[j])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>{var e,t,a;return[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===(e=c.value)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.water_in)||void 0===a?void 0:a.predictive.total)||0)),1)]})),_:1})])),_:1}),(0,l.Wm)(G,{class:"item-style"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[Q])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>{var e,t,a;return[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===(e=c.value)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.water_out)||void 0===a?void 0:a.predictive.total)||0)),1)]})),_:1})])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((null===(e=c.value)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.water_in)||void 0===a||null===(n=a.predictive)||void 0===n?void 0:n.additional_costs)||[],((e,t)=>((0,l.wg)(),(0,l.j4)(G,{class:"item-style",key:t},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.title),1)])),_:2},1024),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((null===(r=c.value)||void 0===r||null===(o=r.data)||void 0===o||null===(d=o.water_out)||void 0===d||null===(m=d.predictive)||void 0===m?void 0:m.additional_costs)||[],((e,t)=>((0,l.wg)(),(0,l.j4)(G,{class:"item-style",key:t},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.title),1)])),_:2},1024),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128)),(0,l.Wm)(G,{class:"item-style"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[T])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>{var e,t;return[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===(e=c.value)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.vat_predictive)||0)),1)]})),_:1})])),_:1})]})),_:1})])),_:1}),(0,l.Wm)(A,{flat:"",class:"bg-grey-4 q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>{var e,t;return[(0,l._)("div",C,[D,(0,l._)("span",H,"R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===(e=c.value)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.predictive)||0)),1)])]})),_:1}),(0,l.Wm)(A,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>{var e,t,a;return[(0,l._)("div",R,[(0,l._)("span",I,"Dated: "+(0,i.zw)(null===(e=c.value)||void 0===e?void 0:e.current_date),1),(0,l._)("span",L,"Reading: "+(0,i.zw)(null===(t=c.value)||void 0===t||null===(a=t.usage)||void 0===a?void 0:a.reading),1)]),(0,l._)("div",Y,[(0,l.Wm)(n,{color:"primary",style:{width:"100%"}},{default:(0,l.w5)((()=>[M])),_:1})])]})),_:1})],64))],64)}}};var N=a(1639),P=a(6602),A=a(1663),E=a(8879),V=a(1973),G=a(4458),J=a(2857),O=a(926),X=a(3246),ee=a(490),te=a(1233),ae=a(7128),le=a(9984),ie=a.n(le);const se=(0,N.Z)(K,[["__scopeId","data-v-30ae4c52"]]),ne=se;ie()(K,"components",{QHeader:P.Z,QToolbar:A.Z,QBtn:E.Z,QToolbarTitle:V.Z,QCard:G.Z,QIcon:J.Z,QSeparator:O.Z,QList:X.Z,QItem:ee.Z,QItemSection:te.Z,QBanner:ae.Z})}}]);