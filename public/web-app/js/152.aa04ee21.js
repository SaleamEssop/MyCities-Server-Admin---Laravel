"use strict";(globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[]).push([[152],{4187:(e,t,l)=>{l.d(t,{t:()=>i,w:()=>s});var a=l(1569);const s=(e,t)=>a.api.get(`/v1/meters/${e}/cost-estimation`,{params:{month:t}}),i=(e,t)=>a.api.get(`/v1/meters/account/${e}/complete-bill`,{params:{month:t}})},5990:(e,t,l)=>{l.d(t,{h:()=>s});const a=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),s=()=>({numberFormat(e){return"number"!==typeof e?e:a.format(e)}})},6094:(e,t,l)=>{l.d(t,{z:()=>i});var a=l(1448);const s=new Intl.NumberFormat("en-US"),i=()=>({unitFormat(e,t){return console.log(t),"number"!==typeof e?e:t===a.w?`${s.format(e)} kL`:t===a.E?`${s.format(e)} kWh`:void 0},klToLitters(e){return"number"!==typeof e?e:`${s.format(1e3*e)} L`}})},1448:(e,t,l)=>{l.d(t,{E:()=>s,w:()=>a});const a=1,s=2},4152:(e,t,l)=>{l.r(t),l.d(t,{default:()=>te});l(8964);var a=l(9835),s=l(6970),i=l(499),m=l(8339),n=l(4187),r=l(5990),d=l(6094);const u=e=>((0,a.dD)("data-v-54f7ea10"),e=e(),(0,a.Cn)(),e),o={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},c={class:"medium-text"},w={class:"medium-text"},v={class:"medium-text"},_={key:0,class:"q-ma-sm q-pa-sm",style:{display:"flex","justify-content":"center","align-items":"center","min-height":"300px"}},f=u((()=>(0,a._)("div",{style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},[(0,a._)("span",{class:"large-text"},"Water Meters")],-1))),y={key:0},g={style:{"justify-content":"space-between","align-items":"center"},class:"flex","aria-label":"heading"},p={class:"large-text"},b=(0,a.Uk)("Email Now"),k=(0,a.Uk)("Water in"),W=(0,a.Uk)("Water Out"),q=(0,a.Uk)(" There is no data for water meters "),h=u((()=>(0,a._)("div",{style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},[(0,a._)("span",{class:"large-text"},"Electricity Meters")],-1))),U={key:2},x={style:{"justify-content":"space-between"},class:"flex","aria-label":"heading"},z={class:"large-text"},F=(0,a.Uk)("Email Now"),S=(0,a.Uk)("Electricity"),D=(0,a.Uk)(" There is no data for electricity meters "),j=u((()=>(0,a._)("div",{style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},[(0,a._)("span",{class:"large-text"},"Additional Costs")],-1))),H=(0,a.Uk)("Subtotal"),T=(0,a.Uk)("VAT"),R=(0,a.Uk)("Total Including VAT"),Z={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},Q=u((()=>(0,a._)("span",{class:"large-text"},"Total",-1))),Y={class:"large-text"},C=(0,a.Uk)(" Note: The amount is calculated based on your inputs and may differ slightly from your actual municipal bill. "),I={__name:"FullBill",setup(e){const t=(0,m.yj)(),l=(0,m.tv)(),u=(0,r.h)(),I=(0,d.z)(),K=(0,i.iH)({}),E=(0,i.iH)(!1);let $=t.query.month;$<0&&l.replace({...t,query:{...t.query,month:1}});const N=(0,i.iH)(t.query.month||1);function L(){var e;null!==(e=K.value)&&void 0!==e&&e.has_history&&(N.value++,l.push({...t,query:{...t.query,month:N.value}}))}function M(){N.value--,l.push({...t,query:{...t.query,month:N.value}})}async function A(){try{K.value=await(0,n.t)(t.params.id,N.value),E.value=!1}catch(e){E.value=!0,K.value=e.response.data}}return(0,a.m0)((async()=>{N.value=t.query.month||1,await A()})),(0,a.bv)((()=>{A().then()})),(e,l)=>{var m,n,r,d,$,A,B,V;const O=(0,a.up)("q-btn"),P=(0,a.up)("q-toolbar-title"),G=(0,a.up)("q-toolbar"),J=(0,a.up)("q-header"),X=(0,a.up)("q-icon"),ee=(0,a.up)("q-card"),te=(0,a.up)("q-banner"),le=(0,a.up)("q-item-section"),ae=(0,a.up)("q-item"),se=(0,a.up)("q-list"),ie=(0,a.up)("q-separator");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(J,{elevated:"",class:"containerWidth new-meter-heading breadcrumbs"},{default:(0,a.w5)((()=>[(0,a.Wm)(G,null,{default:(0,a.w5)((()=>[(0,a.Wm)(O,{onClick:l[0]||(l[0]=t=>e.$router.back()),flat:"",dense:"",round:"",icon:"arrow_back","text-color":"white"}),(0,a.Wm)(P,{class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)((0,i.SU)(t).meta.title),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(ee,{flat:"",class:"bg-grey-4 q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>{var e,t,l;return[(0,a._)("div",o,[(0,a._)("div",c,[null!==(e=K.value)&&void 0!==e&&e.has_history?((0,a.wg)(),(0,a.j4)(X,{key:0,onClick:L,name:"arrow_left",class:"icon-styling"})):((0,a.wg)(),(0,a.j4)(X,{key:1,disabled:"",name:"arrow_left",class:"icon-styling"})),(0,a._)("span",null," Projected bill for "+(0,s.zw)(null===(t=K.value)||void 0===t?void 0:t.month),1),N.value>1?((0,a.wg)(),(0,a.j4)(X,{key:2,onClick:M,name:"arrow_right",class:"icon-styling"})):((0,a.wg)(),(0,a.j4)(X,{key:3,disabled:"",name:"arrow_right",class:"icon-styling"}))]),(0,a._)("span",w,(0,s.zw)(null===(l=K.value)||void 0===l?void 0:l.cycle),1),(0,a._)("span",v,"Today is "+(0,s.zw)(K.value.current_date),1)])]})),_:1}),E.value?((0,a.wg)(),(0,a.iD)("div",_,[(0,a.Wm)(te,{dense:"","inline-actions":"",class:"text-white bg-red"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(K.value.message),1)])),_:1})])):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Wm)(ee,{flat:"",class:"q-ma-sm q-pa-sm water-meter-background"},{default:(0,a.w5)((()=>[f])),_:1}),null!==(m=K.value)&&void 0!==m&&null!==(n=m.meters)&&void 0!==n&&n.water_meters.length?((0,a.wg)(),(0,a.iD)("div",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===(r=K.value)||void 0===r||null===(d=r.meters)||void 0===d?void 0:d.water_meters)||[],(e=>((0,a.wg)(),(0,a.iD)("div",{style:{border:"1px dotted",margin:"20px"},key:e.meter_details.id},[(0,a.Wm)(ee,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>[(0,a._)("div",g,[(0,a._)("span",p,"Meter# "+(0,s.zw)(e.meter_details.meter_number),1),(0,a.Wm)(O,{class:"q-mt-sm",style:{"margin-top":"0"},color:"blue-2",rounded:"",unelevated:"","text-color":"black",size:"sm"},{default:(0,a.w5)((()=>[b])),_:1})])])),_:2},1024),(0,a.Wm)(ee,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{bordered:"",separator:""},{default:(0,a.w5)((()=>{var t,l,m,n,r,d;return[(0,a.Wm)(ae,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(le,{class:"item-styling"},{default:(0,a.w5)((()=>[k])),_:1}),(0,a.Wm)(le,{class:"text-blue-9 medium-text"},{default:(0,a.w5)((()=>{var t;return[(0,a.Uk)((0,s.zw)((0,i.SU)(I).unitFormat(e.usage.predictive_monthly_usage,null===e||void 0===e||null===(t=e.meter_details)||void 0===t?void 0:t.meter_type_id)),1)]})),_:2},1024),(0,a.Wm)(le,{side:"",class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,s.zw)((0,i.SU)(u).numberFormat(e.data.water_in.predictive.total)),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(ae,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(le,{class:"item-styling"},{default:(0,a.w5)((()=>[W])),_:1}),(0,a.Wm)(le,{side:"",class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,s.zw)((0,i.SU)(u).numberFormat(e.data.water_out.predictive.total)),1)])),_:2},1024)])),_:2},1024),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===e||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.water_in)||void 0===l||null===(m=l.predictive)||void 0===m?void 0:m.additional_costs)||[],((e,t)=>((0,a.wg)(),(0,a.j4)(ae,{class:"item-style",key:t},{default:(0,a.w5)((()=>[(0,a.Wm)(le,{class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(le,{side:"",class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,s.zw)((0,i.SU)(u).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===e||void 0===e||null===(n=e.data)||void 0===n||null===(r=n.water_out)||void 0===r||null===(d=r.predictive)||void 0===d?void 0:d.additional_costs)||[],((e,t)=>((0,a.wg)(),(0,a.j4)(ae,{class:"item-style",key:t},{default:(0,a.w5)((()=>[(0,a.Wm)(le,{class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(le,{side:"",class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,s.zw)((0,i.SU)(u).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128))]})),_:2},1024)])),_:2},1024)])))),128))])):((0,a.wg)(),(0,a.j4)(ee,{key:1,flat:"",class:"q-ma-sm q-pa-sm text-center"},{default:(0,a.w5)((()=>[q])),_:1})),(0,a.Wm)(ee,{flat:"",class:"q-ma-sm q-pa-sm electricity-meter-background"},{default:(0,a.w5)((()=>[h])),_:1}),null!==($=K.value)&&void 0!==$&&null!==(A=$.meters)&&void 0!==A&&A.electricity_meters.length?((0,a.wg)(),(0,a.iD)("div",U,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===(B=K.value)||void 0===B||null===(V=B.meters)||void 0===V?void 0:V.electricity_meters)||[],(e=>((0,a.wg)(),(0,a.iD)("div",{style:{border:"1px dotted",margin:"20px"},key:e.meter_details.id},[(0,a.Wm)(ee,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>[(0,a._)("div",x,[(0,a._)("span",z,"Meter# "+(0,s.zw)(e.meter_details.meter_number),1),(0,a.Wm)(O,{class:"q-mt-sm",style:{"margin-top":"0"},color:"blue-2",rounded:"",unelevated:"","text-color":"black",size:"sm"},{default:(0,a.w5)((()=>[F])),_:1})])])),_:2},1024),(0,a.Wm)(ee,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{bordered:"",separator:""},{default:(0,a.w5)((()=>{var t,l,m;return[(0,a.Wm)(ae,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(le,{class:"item-styling"},{default:(0,a.w5)((()=>[S])),_:1}),(0,a.Wm)(le,{class:"text-blue-9 medium-text"},{default:(0,a.w5)((()=>{var t;return[(0,a.Uk)((0,s.zw)((0,i.SU)(I).unitFormat(e.usage.predictive_monthly_usage,null===e||void 0===e||null===(t=e.meter_details)||void 0===t?void 0:t.meter_type_id)),1)]})),_:2},1024),(0,a.Wm)(le,{side:"",class:"item-styling"},{default:(0,a.w5)((()=>{var t;return[(0,a.Uk)("R "+(0,s.zw)((0,i.SU)(u).numberFormat((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.predictive)||0)),1)]})),_:2},1024)])),_:2},1024),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===e||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.electricity)||void 0===l||null===(m=l.predictive)||void 0===m?void 0:m.additional_costs)||[],((e,t)=>((0,a.wg)(),(0,a.j4)(ae,{class:"item-style",key:t},{default:(0,a.w5)((()=>[(0,a.Wm)(le,{class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(le,{side:"",class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,s.zw)((0,i.SU)(u).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128))]})),_:2},1024)])),_:2},1024)])))),128))])):((0,a.wg)(),(0,a.j4)(ee,{key:3,flat:"",class:"q-ma-sm q-pa-sm text-center"},{default:(0,a.w5)((()=>[D])),_:1})),(0,a.Wm)(ee,{flat:"",class:"q-ma-sm q-pa-sm additional-costs-background"},{default:(0,a.w5)((()=>[j])),_:1}),(0,a.Wm)(ee,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{bordered:"",separator:""},{default:(0,a.w5)((()=>{var e;return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===(e=K.value)||void 0===e?void 0:e.additional_costs)||[],((e,t)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t},["no"===e.exempt_vat?((0,a.wg)(),(0,a.j4)(ae,{key:0,class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(le,{class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.name),1)])),_:2},1024),(0,a.Wm)(le,{side:"",class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,s.zw)((0,i.SU)(u).numberFormat(+(null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)):(0,a.kq)("",!0)],64)))),128))]})),_:1})])),_:1}),(0,a.Wm)(ee,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(se,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ae,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(le,{class:"item-styling"},{default:(0,a.w5)((()=>[H])),_:1}),(0,a.Wm)(le,{side:"",class:"item-styling"},{default:(0,a.w5)((()=>{var e;return[(0,a.Uk)("R "+(0,s.zw)((0,i.SU)(u).numberFormat(+(null===(e=K.value)||void 0===e?void 0:e.vat_exempted_subtotal)||0)),1)]})),_:1})])),_:1})])),_:1}),(0,a.Wm)(ie)])),_:1}),(0,a.Wm)(ee,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{bordered:""},{default:(0,a.w5)((()=>{var e;return[(0,a.Wm)(ae,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(le,{class:"item-styling"},{default:(0,a.w5)((()=>[T])),_:1}),(0,a.Wm)(le,{side:"",class:"item-styling"},{default:(0,a.w5)((()=>{var e;return[(0,a.Uk)("R "+(0,s.zw)((0,i.SU)(u).numberFormat(+(null===(e=K.value)||void 0===e?void 0:e.vat)||0)),1)]})),_:1})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===(e=K.value)||void 0===e?void 0:e.additional_costs)||[],((e,t)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t},["yes"===e.exempt_vat?((0,a.wg)(),(0,a.j4)(ae,{key:0,class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(le,{class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.name),1)])),_:2},1024),(0,a.Wm)(le,{side:"",class:"item-styling"},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,s.zw)((0,i.SU)(u).numberFormat(+(null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)):(0,a.kq)("",!0)],64)))),128)),(0,a.Wm)(ae,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(le,{class:"item-styling"},{default:(0,a.w5)((()=>[R])),_:1}),(0,a.Wm)(le,{side:"",class:"item-styling"},{default:(0,a.w5)((()=>{var e;return[(0,a.Uk)("R "+(0,s.zw)((0,i.SU)(u).numberFormat(+(null===(e=K.value)||void 0===e?void 0:e.total_including_vat)||0)),1)]})),_:1})])),_:1})]})),_:1})])),_:1}),(0,a.Wm)(ee,{flat:"",class:"bg-grey-4 q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>{var e;return[(0,a._)("div",Z,[Q,(0,a._)("span",Y,"R "+(0,s.zw)((0,i.SU)(u).numberFormat((null===(e=K.value)||void 0===e?void 0:e.total_including_vat)||0)),1)])]})),_:1}),(0,a.Wm)(ee,{flat:"",class:"bg-white q-ma-sm q-pa-sm",style:{"padding-bottom":"40px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(te,{dense:"","inline-actions":"",class:"text-white bg-red"},{default:(0,a.w5)((()=>[C])),_:1})])),_:1})],64))],64)}}};var K=l(1639),E=l(6602),$=l(1663),N=l(8879),L=l(1973),M=l(4458),A=l(2857),B=l(7128),V=l(3246),O=l(490),P=l(1233),G=l(926),J=l(9984),X=l.n(J);const ee=(0,K.Z)(I,[["__scopeId","data-v-54f7ea10"]]),te=ee;X()(I,"components",{QHeader:E.Z,QToolbar:$.Z,QBtn:N.Z,QToolbarTitle:L.Z,QCard:M.Z,QIcon:A.Z,QBanner:B.Z,QList:V.Z,QItem:O.Z,QItemSection:P.Z,QSeparator:G.Z})}}]);