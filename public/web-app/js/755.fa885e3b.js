(globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[]).push([[755],{3755:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>Ma});var a=l(9835),i=l(499),n=l(6970),o=l(7208),r=l(6190),s=l(9428),u=l(6144);const d=e=>((0,a.dD)("data-v-137e594c"),e=e(),(0,a.Cn)(),e),c={class:"flex justify-between items-center"},m={class:"text-bold text-h6 text-black"},p={class:"round-cheap"},v={class:"q-mt-md"},g={class:"flex justify-between items-center wrap"},w=d((()=>(0,a._)("span",null,"Last saved reading",-1))),f={class:"flex justify-between items-center"},y=(0,a.Uk)("Enter Reading"),_=[y],b=d((()=>(0,a._)("p",{class:"q-mx-md"},null,-1))),h=(0,a.Uk)("Cost"),D=[h],k=(0,a.Uk)("Edit last reading"),M=(0,a.Uk)("Delete this meter"),x=(0,a.Uk)("Add a new meter");function C(e,t,l,i,o,r){const s=(0,a.up)("q-card-section"),u=(0,a.up)("MeterComponent"),d=(0,a.up)("q-item-section"),y=(0,a.up)("q-item"),h=(0,a.up)("q-list"),C=(0,a.up)("q-menu"),S=(0,a.up)("q-btn"),A=((0,a.up)("q-separator"),(0,a.up)("q-slide-transition"),(0,a.up)("q-card-actions"),(0,a.up)("q-card")),Z=(0,a.up)("MeterComponentWithInput"),Y=(0,a.up)("q-dialog"),F=(0,a.up)("AddMeter"),W=(0,a.up)("MeterCost"),R=(0,a.Q2)("ripple"),q=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(A,{class:"no-shadow",dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"text-center q-py-none"},{default:(0,a.w5)((()=>{var t,l;return[(0,a._)("div",c,[(0,a._)("span",m,(0,n.zw)(null===(t=e.meter)||void 0===t?void 0:t.type.title),1),(0,a._)("span",p,"Meter "+(0,n.zw)(null===(l=e.meter)||void 0===l?void 0:l.number),1)])]})),_:1}),(0,a.Wm)(s,{class:"q-pt-none text-center"},{default:(0,a.w5)((()=>{var t,l;return[(0,a._)("div",v,[(0,a._)("div",g,[w,(0,a._)("b",null,(0,n.zw)(new Date(e.lastReading.time).toLocaleString("en-GB")),1)]),(0,a.Wm)(u,{text:e.lastReading.valueInString,meterStyle:null===(t=e.meter)||void 0===t||null===(l=t.type)||void 0===l?void 0:l.id,readingType:2==e.meter.type.id?"electricity-recorded-reading":"water-recorded-reading"},null,8,["text","meterStyle","readingType"])])]})),_:1}),(0,a.Wm)(s,{class:"text-center"},{default:(0,a.w5)((()=>[(0,a._)("div",f,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:"round-cheap",clickable:"",onClick:t[0]||(t[0]=t=>{e.modelForReadingSet_NewReading=!0,e.modelForReadingSet=!0})},_)),[[R]]),b,(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:"round-cheap",clickable:"",onClick:t[1]||(t[1]=t=>e.modelCostForMeter=!0)},D)),[[R]]),(0,a.Wm)(S,{flat:"",size:"lg",icon:"more_horiz","text-color":"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{anchor:"center middle",self:"center middle"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{clickable:"",onClick:t[2]||(t[2]=t=>{e.modelForReadingSet_NewReading=!1,e.modelForReadingSet=!0})},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[k])),_:1})])),_:1})),[[q],[R]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{clickable:"",onClick:t[3]||(t[3]=t=>e.deleteMeter(e.meter))},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[M])),_:1})])),_:1})),[[q]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{onClick:t[4]||(t[4]=t=>e.modelMeterForNewEdit=!0),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[x])),_:1})])),_:1})),[[q]])])),_:1})])),_:1})])),_:1})])])),_:1}),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(Y,{modelValue:e.modelForReadingSet,"onUpdate:modelValue":t[9]||(t[9]=t=>e.modelForReadingSet=t),onHide:t[10]||(t[10]=t=>e.modelForReadingSet=!1),persistent:"","full-width":!0},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{meter:e.meter,onClose:t[7]||(t[7]=t=>e.modelForReadingSet=!1),onSave:t[8]||(t[8]=t=>e.modelForReadingSet=!1),isNew:e.modelForReadingSet_NewReading},null,8,["meter","isNew"])])),_:1},8,["modelValue"]),(0,a.Wm)(Y,{modelValue:e.modelMeterForNewEdit,"onUpdate:modelValue":t[13]||(t[13]=t=>e.modelMeterForNewEdit=t),onHide:t[14]||(t[14]=t=>e.modelMeterForNewEdit=!1),"full-width":!0,persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{propsMeter:null,propsAccount:e.selectedAccount,onClose:t[11]||(t[11]=t=>e.modelMeterForNewEdit=!1),onSave:t[12]||(t[12]=t=>e.modelMeterForNewEdit=!1)},null,8,["propsAccount"])])),_:1},8,["modelValue"]),(0,a.Wm)(Y,{modelValue:e.modelCostForMeter,"onUpdate:modelValue":t[17]||(t[17]=t=>e.modelCostForMeter=t),onHide:t[18]||(t[18]=t=>e.modelCostForMeter=!1),"full-width":!0,persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{meter:e.meter,onClose:t[15]||(t[15]=t=>e.modelCostForMeter=!1),onSave:t[16]||(t[16]=t=>e.modelCostForMeter=!1),isNew:!0},null,8,["meter"])])),_:1},8,["modelValue"])],64)}var S=l(8339),A=l(4170),Z=(l(1530),l(9302));const Y={class:"text-container"};function F(e,t,l,i,o,r){return(0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(["container-border",e.readingType])},[(0,a._)("div",Y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.chars,((t,l)=>((0,a.wg)(),(0,a.iD)("span",{key:l,class:"text-h4",style:(0,n.j5)(e.styles(l))},(0,n.zw)(t),5)))),128))])],2)}l(6727),l(8964),l(702);const W=[{color:"black",background:"white"},{color:"white",background:"#b30101"},{color:"white",background:"#666666"}],R=(0,a.aZ)({name:"MeterComponent",props:{text:String,meterStyle:Number,readingType:String,isInput:{default:!1,type:Boolean}},setup(e){let t=[];const l=(0,a.Fl)((()=>{var l,a;let i=6;switch(e.meterStyle){case 1:i=8;break;case 2:i=6;break}let n=null===e||void 0===e||null===(l=e.text)||void 0===l||null===(a=l.toString())||void 0===a?void 0:a.trim();if(e.isInput){n?n.includes(".")&&(n=n.replace(".","")):n="";const l=[...n];let a=[];return l.length<i&&(a=[...new Array(i-l.length)].map((t=>e.isInput?"_":"0"))),t=a,[...l,...a]}{n?n.includes(".")&&(n=n.replace(".","")):n="";const e=[...n];let t=[];return e.length<i&&(t=[...new Array(i-e.length)].map((e=>(n||"").length>0?"0":"_"))),[...t,...e]}})),i=t=>{const a=l.value.length||0;switch(e.meterStyle){case 1:if(t>=a-4)return W[1];case 2:if(t>=a-1)return W[2]}return W[0]};function n(){return l.value.map((e=>"_"==e?0:e)).join("")}return{chars:l,styles:i,getValueInString:n}}});var q=l(1639);const U=(0,q.Z)(R,[["render",F],["__scopeId","data-v-9ed7227e"]]),I=U;var j=l(7594),V=l(1957),P=l(6889),z=l.n(P);const H=e=>((0,a.dD)("data-v-7ce277ba"),e=e(),(0,a.Cn)(),e),Q={key:0,class:""},E={key:0,class:"q-mb-sm text-subtitle2","text-color":"negative",style:{color:"red"}},B={class:"row text-subtitle2"},T=H((()=>(0,a._)("div",{class:"col-7"},"Account Number",-1))),O={class:"col-5"},$=H((()=>(0,a._)("div",{class:"col-7"},"Meter Number",-1))),L={class:"col-5"},N=H((()=>(0,a._)("div",{class:"col-7"},"Name on Account",-1))),K={class:"col-5"},J=H((()=>(0,a._)("div",{class:"col-7"},"Last reading",-1))),G={class:"col-5"},X=H((()=>(0,a._)("div",{class:"col-7"},"Last reading Date",-1))),ee={class:"col-5"},te={class:"row selectDate"},le={class:"text-body1"},ae={class:"q-pt-md justify-center col-5"},ie={class:"round-cheap text-center"},ne=(0,a.Uk)("Select date "),oe={class:"row items-center justify-end q-gutter-sm"},re={class:"absolute",style:{opacity:"0"}},se={class:"text-center"},ue=(0,a.Uk)("Cancel"),de=(0,a.Uk)("Save"),ce=H((()=>(0,a._)("div",{class:"text-subtitle1",style:{"margin-top":"-10px"}},"Powered by the",-1))),me=H((()=>(0,a._)("div",null,[(0,a._)("img",{class:"q-px-lg myCityIcon",src:z()})],-1)));function pe(e,t,l,i,o,r){const s=(0,a.up)("q-img"),u=(0,a.up)("q-separator"),d=(0,a.up)("q-badge"),c=(0,a.up)("q-btn"),m=(0,a.up)("q-date"),p=(0,a.up)("q-popup-proxy"),v=(0,a.up)("q-card-section"),g=(0,a.up)("q-input"),w=(0,a.up)("MeterComponent"),f=(0,a.up)("q-card-actions"),y=(0,a.up)("q-card"),_=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(y,{id:"cardId_12"},{default:(0,a.w5)((()=>[e.imageSrc?((0,a.wg)(),(0,a.iD)("div",Q,[(0,a.Wm)(s,{src:e.imageSrc,class:"captureImage"},null,8,["src"]),(0,a.Wm)(u,{color:"grey",size:"6px"})])):(0,a.kq)("",!0),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>{var l,i,o,r;return[e.isNew?((0,a.wg)(),(0,a.iD)("div",E,(0,n.zw)(e.alertIfLessThen24Hours),1)):(0,a.kq)("",!0),(0,a._)("div",B,[T,(0,a._)("div",O,": "+(0,n.zw)(null===(l=e.account)||void 0===l?void 0:l.number),1),$,(0,a._)("div",L,": "+(0,n.zw)(e.meter?null===(i=e.meter)||void 0===i?void 0:i.number:""),1),N,(0,a._)("div",K,": "+(0,n.zw)(null===(o=e.account)||void 0===o?void 0:o.title),1),J,(0,a._)("div",G," : "+(0,n.zw)(null===(r=e.lastReadingItem)||void 0===r?void 0:r.value)+" "+(0,n.zw)(1==e.meter.type.id?"kl":"kW"),1),X,(0,a._)("div",ee,": "+(0,n.zw)(e.lastreadingDate),1)]),(0,a.wy)((0,a._)("div",te,[(0,a.Wm)(d,{class:"bg-white col-7","text-color":"black"},{default:(0,a.w5)((()=>[(0,a._)("span",le," Date: "+(0,n.zw)(e.readingDate),1)])),_:1}),(0,a.wy)((0,a._)("div",ae,[(0,a._)("span",ie,[ne,(0,a.Wm)(p,{onBeforeShow:e.updateProxy,cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:e.readingDate,"onUpdate:modelValue":t[0]||(t[0]=t=>e.readingDate=t),mask:"DD-MMM-YYYY"},{default:(0,a.w5)((()=>[(0,a._)("div",oe,[(0,a.wy)((0,a.Wm)(c,{label:"Cancel",color:"primary",flat:""},null,512),[[_]]),(0,a.wy)((0,a.Wm)(c,{label:"Select",color:"primary",flat:"",onClick:e.save},null,8,["onClick"]),[[_]])])])),_:1},8,["modelValue"])])),_:1},8,["onBeforeShow"])])],512),[[V.F8,e.isNew]])],512),[[V.F8,e.isNew]])]})),_:1}),(0,a.Wm)(v,{style:{"margin-top":"-15px"}},{default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,n.C_)(["relative",e.inputFocus?"stroke-focus":"stroke-simple"])},[(0,a._)("div",re,[(0,a.Wm)(g,{type:"number",color:"black",min:0,outlined:"",onFocus:t[1]||(t[1]=t=>e.inputFocus=!0),onBlur:t[2]||(t[2]=t=>e.inputFocus=!1),step:1,autofocus:"",modelValue:e.currentReading,"onUpdate:modelValue":t[3]||(t[3]=t=>e.currentReading=t),oninput:"if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",maxlength:2==e.meter.type.id?6:8,onKeypress:t[4]||(t[4]=t=>{(`${e.currentReading||""}`.length>=(2==e.meter.type.id?6:8)||46==t.keyCode)&&t.preventDefault()})},null,8,["modelValue","maxlength"])]),(0,a._)("div",se,[(0,a.Wm)(w,{text:e.currentReading,ref:"meterComopnentReadValue",meterStyle:e.meter.type.id,readingType:2==e.meter.type.id?"electricity-recorded-reading":"water-recorded-reading",isInput:!0},null,8,["text","meterStyle","readingType"])])],2)])),_:1}),(0,a.Wm)(f,{align:"center",style:{"margin-top":"-10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{icon:"image",color:"primary","text-color":"black",onClick:t[5]||(t[5]=t=>e.captureImage())}),(0,a.Wm)(c,{color:"primary","text-color":"black",onClick:t[6]||(t[6]=t=>e.$emit("close"))},{default:(0,a.w5)((()=>[ue])),_:1}),(0,a.Wm)(c,{color:"primary","text-color":"black",onClick:t[7]||(t[7]=t=>e.screenShotCapture())},{default:(0,a.w5)((()=>[de])),_:1})])),_:1}),(0,a.Wm)(u,{color:"grey",size:"10px"}),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[ce,me,(0,a._)("div",{onClick:t[8]||(t[8]=t=>e.openWeb()),style:{"text-decoration":"underline"},class:"text-body1 text-center"}," www.mycities.co.za ")])),_:1}),(0,a.Wm)(u,{color:"grey",size:"4px"})])),_:1})}var ve=l(8761),ge=l.n(ve);const we=class{constructor(){ge()(this,"getSubmitedAndLastReading",((e,t,l)=>{const a="MMM YYYY",i=(e,t,l)=>{var a,i;let n=A.ZP.formatDate(new Date(t),"M"),o=(e||[]).map((e=>{if(3===n?l-2419e6:l-26298e5<=e.time&&e.time<=l)return e}));o=o.filter((function(e){return void 0!==e})),o=o.sort(((e,t)=>t.time-e.time));var r=(e||[]).map((e=>{if(l-52596e5<=e.time&&e.time<=l-26298e5)return e}));r=r.filter((function(e){return void 0!==e}));var s=(e||[]).map((e=>e));if(s=s.filter((function(e){return void 0!==e})),null!==(a=o)&&void 0!==a&&a.length)if(1===(null===(i=o)||void 0===i?void 0:i.length)){u=o[0]||{};if(0!==r.length)d=r[0]||{};else d=s[s.length-1]||{}}else u=o[0]||{},d=o[o.length-1]||{};else var u=s[0]||{},d=s[s.length-1]||{};return{firstReading:d,lastReading:u}};let n={},o={},r=A.ZP.addToDate(t,{days:l-1}),s=A.ZP.formatDate(r,"x");const u=A.ZP.formatDate(r,a);let d=24;do{let t=A.ZP.formatDate(A.ZP.subtractFromDate(r,{months:24-d}),a);const{firstReading:l,lastReading:u}=i(e,t,s);if(0===Object.keys(n).length&&Object.keys(u).length>0?(n=u,l.time!=u.time&&(o=l)):Object.keys(n).length>0&&0===Object.keys(o).length&&Object.keys(u).length>0&&n.time!=u.time&&(o=u),Object.keys(n).length>0&&Object.keys(o).length>0)break}while(--d>0);return{firstReading:o,lastReading:n,period:u}})),ge()(this,"calculateUnitForMonth",(({isLastReadings:e,id:t})=>{const{lastReading:l,firstReading:a}=e;if(a.value>l.value&&l.time>a.time){let e=2===t?99999.9:9999.9999;var i=e+l.value-a.value}else i=l.value-a.value;var n=l.time-a.time;return 1e3*(i/n||0)*60*60*24})),ge()(this,"getWaterMeterCost",(e=>{const t=30,l=t*e,a=[{min:0,max:200,ir:26.87,or:4.43,out:.95},{min:200,max:833,ir:31.83,or:7.48,out:.75},{min:833,max:1e3,ir:42.43,or:14.26,out:.75},{min:1e3,max:1500,ir:65.39,or:22.26,out:.65},{min:1500,max:Number.MAX_SAFE_INTEGER,ir:71.91,or:25.48,out:.65}].map((e=>({min:e.min,max:e.max,ir:e.ir,or:e.or,out:e.out}))),i=[{title:"Infrastructure Surcharge",amountPerUnit:1.48,amount:0},{title:"Sewage Disposal Charge",amountPerUnit:1.48,amount:0}],n=(e,t)=>{const l=a[e],i=Math.round(30*(l.max-l.min)/1e3),n=Math.min(i,t),o=n*l.out;return{conditionInputUses:n,conditionOutputUses:o,conditionInputRate:n*l["ir"],conditionOutputRate:o*l["or"],nextUnit:t-n}},o=new Array;let r=l,s=0;while(s<a.length){let e=n(s++,r);if(r=e.nextUnit,o.push(e),r<=0)break}const u=o.reduce(((e,t)=>(e["in"]["value"]+=t["conditionInputRate"],e["out"]["value"]+=t["conditionOutputRate"],e["in"]["reading"]+=t["conditionInputUses"],e["out"]["reading"]+=t["conditionOutputUses"],e)),{in:{title:"Water in",value:0,reading:0},out:{title:"Water Out",value:0,reading:0}}),d=[];Object.keys(u).forEach((e=>{d.push(u[e])})),i.forEach((e=>{d.push({title:e.title,value:e.amountPerUnit*("Sewage Disposal Charge"===e.title?u["out"]["reading"]:u["in"]["reading"])||e.amount})}));const c={};return c["projection"]=l>0?d:[],c["total"]=l>0?d.reduce(((e,{value:t})=>(e+=t,e)),0):0,c["readingCharges"]=o,c["extraCharges"]=i,c})),ge()(this,"getElectricMeterCost",(e=>{const t=30,l=t*e,a={},i=[];return i.push({title:"Electricity bill",value:2.2425*l}),a["projection"]=i,a["total"]=i.reduce(((e,{value:t})=>(e+=t,e)),0),a})),ge()(this,"getCost",((e,t)=>{var l,a;return 2==(null===t||void 0===t||null===(l=t.type)||void 0===l?void 0:l.id)?this.getElectricMeterCost(e):1==(null===t||void 0===t||null===(a=t.type)||void 0===a?void 0:a.id)?this.getWaterMeterCost(e):void 0})),ge()(this,"timeDiffCalc",((e,t)=>{let l=Math.abs(e-t)/1e3;const a=Math.floor(l/86400);l-=86400*a;const i=Math.floor(l/3600)%24;l-=3600*i;const n=Math.floor(l/60)%60;l-=60*n;let o="";return a>0&&(o+=1===a?`${a} day, `:`${a} days, `),o+=0===i||1===i?`${i} hour, `:`${i} hours, `,o+=`${n} minutes`,o}))}};var fe=l(1569),ye=l(7881),_e=l(5326),be=l.n(_e);const{Camera:he,Filesystem:De}=ye.Vn,ke=(0,a.aZ)({name:"MeterComponentWithInput",props:{meter:Object,isNew:Boolean},setup(e,{emit:t}){const l=(0,i.iH)(),n=(0,j.H)(),o=(0,r.c)(),s=o.getAccountById(e.meter.account.id),u=(0,i.iH)(A.ZP.formatDate(Date.now(),"DD/MM/YYYY")),d=(0,Z.Z)(),c=e=>{d.notify({attrs:{role:"alertdialog"},message:e,actions:[{icon:"close","aria-label":"Dismiss"}]})},m=(0,i.iH)(A.ZP.formatDate(new Date,"DD-MMM-YYYY")),p=()=>{window.open("http://mycities.co.za/","_blank")},v=(0,i.iH)(""),g=async()=>{const e=await he.getPhoto({quality:100,source:ye.oK.Prompt,resultType:ye.dk.Uri,direction:ye.GW.Rear});var t=e.webPath;v.value=t};async function w(){try{await De.mkdir({path:"MyCityApp",directory:ye.QT.Documents,recursive:!0})}catch(e){console.error("Unable to make directory",e)}}const f=()=>{var e=document.getElementById("cardId_12");be().toPng(e).then((function(e){var t=new Image;t.src=e;const l=t.src,a=A.ZP.formatDate(Date.now(),"YYYY_MM_DD_HH_mm_ss")+".jpeg";w();De.writeFile({path:"MyCityApp/"+a,data:l,directory:ye.QT.Documents});F(!1),d.notify({message:"Saved:-FileManager/Documents/MyCityApp/.."})})).catch((function(e){console.error("oops, something went wrong!",e)}))},y=(0,i.iH)(!1),_=n.getReadingsByMeterId(e.meter.id),b=(0,i.iH)(_[0].time),h=(0,i.iH)();let D=(0,i.iH)(_[0]);const k=(0,i.iH)(A.ZP.formatDate(new Date(D.value.time),"DD-MMM-YYYY")),M=(0,i.iH)(D.value.valueInString);e.isNew||(D.value.isSubmit?c("Submitted reading can not update"):(D=(0,i.iH)(_[0]),M.value=_[0].valueInString||"",h.value=_[0]));const x=(0,a.Fl)((()=>{let e=A.ZP.extractDate(m.value,"DD-MMM-YYYY"),t=A.ZP.formatDate(e,"x");if(D.value.time>t)return" ";if(D.value.time+864e5>Date.now()){let e=C.timeDiffCalc(D.value.time+864e5,Date.now());return`Your last entry was less than 24 hours ago. Please wait ${e}.`}return""})),C=new we;function S(e,t){d.dialog({title:"Confirm",message:`${e}`,cancel:!0,persistent:!0}).onOk((()=>{console.log(">>>> OK"),t()})).onCancel((()=>{console.log(">>>> Cancel")})).onDismiss((()=>{console.log("I am triggered on both OK and Cancel")}))}function Y(e){d.dialog({title:"Alert",message:`${e}`,persistent:!0,cancel:!0}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}const F=(a=!1)=>{var i,o;const r=(l,i)=>{const o=new Date(A.ZP.extractDate(m.value,"DD-MMM-YYYY")).toISOString();if(e.isNew)(0,fe.addReadingInMeter)({meter_id:e.meter.id,meter_reading_date:o,meter_reading:i}).then((({status:t,data:r})=>{t&&n.addReading({id:r.id,value:l,valueInString:i,time:new Date(o).getTime(),isSubmit:a,meter:{id:e.meter.id}})}));else{let t=A.ZP.formatDate(new Date(b.value).toISOString());(0,fe.updateReadingInMeter)({meter_id:e.meter.id,meter_reading_date:t,meter_reading:i,meter_reading_id:h.value.id}).then((({status:o,data:r})=>{o&&n.updateReading({id:h.value.id,value:l,valueInString:i,time:new Date(t).getTime(),isSubmit:a,meter:{id:e.meter.id}})}))}t("save")},s=l.value.getValueInString(),u=s/(2==e.meter.type.id?10:1e4);let d=A.ZP.extractDate(m.value,"DD-MMM-YYYY"),p=A.ZP.formatDate(d,"x"),v=A.ZP.formatDate(new Date,"x");if(e.isNew)if(D.value.time>p);else if(D.value.time+864e5>p){let e=C.timeDiffCalc(D.value.time+864e5,Date.now());return void c(`Your last entry was less than 24 hours ago. Please wait ${e} before you read again.`)}if(v>p){var g=(_||[]).map((e=>{if(p>e.time)return e}));g=g.filter((function(e){return void 0!==e}));var w=(_||[]).map((e=>{if(p<e.time)return e}));w=w.filter((function(e){return void 0!==e}))}var f,y;if(D.value.time>p&&(null===(i=g[0])||void 0===i?void 0:i.value)>u||(null===(o=w[w.length-1])||void 0===o?void 0:o.value)<u&&D.value.time>p)Y(`Please enter a reading between ${(null===(f=g[0])||void 0===f?void 0:f.value)||"less"} to ${(null===(y=w[w.length-1])||void 0===y?void 0:y.value)||"more"}.`);else if(e.isNew&&(!u||u<D.value.value)&&D.value.time<p){e.meter.type.id;S(`You have entered a value lower than the previous reading. Your usage is ${D.value.valueInString} to ${s}. Do you want to apply a rollover?.`,(()=>{(2==e.meter.type.id?D.value.valueInString-s>1e5:D.value.valueInString-s>1e6)?S("You have entered a value which exceeds a usage of 100 000 or More. Shall we accept this reading?",(()=>{r(u,s)})):r(u,s)}))}else u>D.value.value&&(2==e.meter.type.id?s-D.value.valueInString>1e5:s-D.value.valueInString>1e6)?S("You have entered a value which exceeds a usage of 100 000 or More. Shall we accept this reading?",(()=>{r(u,s)})):r(u,s)};return{account:s,inputFocus:y,currentReading:M,currentReadingItem:h,lastReadingItem:D,saveReading:F,meterComopnentReadValue:l,showAlert:c,alertIfLessThen24Hours:x,lastEditTime:b,imageSrc:v,currentDate:u,captureImage:g,screenShotCapture:f,openWeb:p,mkdir:w,readingDate:m,lastreadingDate:k}},components:{MeterComponent:I}});var Me=l(4458),xe=l(1487),Ce=l(926),Se=l(3190),Ae=l(990),Ze=l(2765),Ye=l(7088),Fe=l(8879),We=l(6611),Re=l(1821),qe=l(2146),Ue=l(9984),Ie=l.n(Ue);const je=(0,q.Z)(ke,[["render",pe],["__scopeId","data-v-7ce277ba"]]),Ve=je;Ie()(ke,"components",{QCard:Me.Z,QImg:xe.Z,QSeparator:Ce.Z,QCardSection:Se.Z,QBadge:Ae.Z,QPopupProxy:Ze.Z,QDate:Ye.Z,QBtn:Fe.Z,QInput:We.Z,QCardActions:Re.Z}),Ie()(ke,"directives",{ClosePopup:qe.Z});const Pe=e=>((0,a.dD)("data-v-6debaf93"),e=e(),(0,a.Cn)(),e),ze=Pe((()=>(0,a._)("div",{class:"text-subtitle2"},"Necessary Details",-1))),He=["src"],Qe={class:"row justify-center q-mt-lg"},Ee={class:"text-body1"},Be={class:"q-pt-md justify-center flex"},Te={class:"round-cheap text-center"},Oe=(0,a.Uk)("Edit date "),$e={class:"row items-center justify-end q-gutter-sm"},Le={class:"row justify-center q-mt-lg"},Ne=Pe((()=>(0,a._)("span",{class:"text-body1"},"Click to enter a reading",-1))),Ke={class:"text-center"},Je={class:"absolute",style:{opacity:"0"}},Ge={class:"text-center"};function Xe(e,t,l,i,o,r){const s=(0,a.up)("q-card-section"),u=(0,a.up)("q-radio"),d=(0,a.up)("q-item-section"),c=(0,a.up)("q-avatar"),m=(0,a.up)("q-item-label"),p=(0,a.up)("q-item"),v=(0,a.up)("q-list"),g=(0,a.up)("q-input"),w=(0,a.up)("q-badge"),f=(0,a.up)("q-btn"),y=(0,a.up)("q-date"),_=(0,a.up)("q-popup-proxy"),b=(0,a.up)("q-separator"),h=(0,a.up)("MeterComponent"),D=(0,a.up)("q-space"),k=(0,a.up)("q-card-actions"),M=(0,a.up)("q-card"),x=(0,a.Q2)("ripple"),C=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(M,{class:"modelHeight"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"bg-primary"},{default:(0,a.w5)((()=>[ze])),_:1}),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.$METER_TYPES,(l=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(p,{tag:"label",key:l.id},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:e.meter.type.id,"onUpdate:modelValue":t[0]||(t[0]=t=>e.meter.type.id=t),val:l.id},null,8,["modelValue","val"])])),_:2},1024),(0,a.Wm)(d,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a._)("img",{src:l.thumbnail},null,8,He)])),_:2},1024),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(l.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[x]]))),128))])),_:1}),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{color:"black",type:"text",min:"0",modelValue:e.meter.title,"onUpdate:modelValue":t[1]||(t[1]=t=>e.meter.title=t),modelModifiers:{trim:!0},label:"Meter Description"},null,8,["modelValue"]),(0,a.Wm)(g,{color:"black",type:"text",min:"0",modelValue:e.meter.number,"onUpdate:modelValue":t[2]||(t[2]=t=>e.meter.number=t),modelModifiers:{trim:!0},label:"Meter Number"},null,8,["modelValue"]),(0,a._)("div",Qe,[(0,a.Wm)(w,{class:"bg-grey-4","text-color":"black"},{default:(0,a.w5)((()=>[(0,a._)("span",Ee,"Reading date: "+(0,n.zw)(e.readingDate),1)])),_:1})]),(0,a._)("div",Be,[(0,a._)("span",Te,[Oe,(0,a.Wm)(_,{onBeforeShow:e.updateProxy,cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{modelValue:e.readingDate,"onUpdate:modelValue":t[3]||(t[3]=t=>e.readingDate=t),mask:"DD/MM/YYYY"},{default:(0,a.w5)((()=>[(0,a._)("div",$e,[(0,a.wy)((0,a.Wm)(f,{label:"Cancel",color:"primary",flat:""},null,512),[[C]]),(0,a.wy)((0,a.Wm)(f,{label:"OK",color:"primary",flat:"",onClick:e.save},null,8,["onClick"]),[[C]])])])),_:1},8,["modelValue"])])),_:1},8,["onBeforeShow"])])]),(0,a.Wm)(b,{class:"q-mt-md"}),(0,a._)("div",Le,[(0,a.Wm)(w,{class:"bg-grey-4","text-color":"black"},{default:(0,a.w5)((()=>[Ne])),_:1})]),(0,a._)("div",Ke,[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,n.C_)(["relative",e.inputFocus?"stroke-focus":"stroke-simple"])},[(0,a._)("div",Je,[(0,a.Wm)(g,{type:"number",color:"black",min:0,oninput:"if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",maxlength:2==e.meter.type.id?6:8,outlined:"",onFocus:t[4]||(t[4]=t=>e.inputFocus=!0),onBlur:t[5]||(t[5]=t=>e.inputFocus=!1),step:1,modelValue:e.firstReading.valueInString,"onUpdate:modelValue":t[6]||(t[6]=t=>e.firstReading.valueInString=t),onKeypress:t[7]||(t[7]=t=>{(`${e.firstReading.valueInString||""}`.length>=(2==e.meter.type.id?6:8)||46==t.keyCode)&&t.preventDefault()})},null,8,["maxlength","modelValue"])]),(0,a._)("div",Ge,[(0,a.Wm)(h,{ref:"meterComopnentReadValue",text:e.firstReading.valueInString,meterStyle:e.meter.type.id,readingType:2==e.meter.type.id?"electricity-recorded-reading":"water-recorded-reading",isInput:!0},null,8,["text","meterStyle","readingType"])])],2)])),_:1})])])),_:1}),(0,a.Wm)(D),(0,a.Wm)(k,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{color:"red","text-color":"white",class:"q-my-none q-mx-none",label:"Cancel",glossy:"",onClick:t[8]||(t[8]=t=>e.$emit("close"))}),(0,a.Wm)(f,{color:"primary","text-color":"black",class:"q-my-none q-mx-none",label:"Save",glossy:"",onClick:e.addMeter},null,8,["onClick"])])),_:1})])),_:1})}const et={isSubmit:!0,time:Date.now(),value:null,valueInString:"",meter:{id:null}},tt={id:null,title:null,number:null,type:{id:1},account:{id:null}},lt=(0,a.aZ)({name:"AccountComponent",props:{propsMeter:{type:Object,default:tt},autoUpdate:{type:Boolean,default:!1},propsAccount:{type:Object}},setup(e,{emit:t}){const l=(0,Z.Z)(),n=(0,a.Fl)({get(){return A.ZP.formatDate(new Date(c.value.time),"DD/MM/YYYY")},set(e){null!==e&&(c.value.time=new Date(A.ZP.extractDate(e,"DD/MM/YYYY")).getTime())}}),o=(0,s.b)(),r=(0,j.H)(),u=(0,i.iH)(e.propsMeter||JSON.parse(JSON.stringify(tt))),d=(0,i.iH)(),c=(0,i.iH)(JSON.parse(JSON.stringify(et))),m=()=>{null==u.value.id&&(u.value.id=Date.now(),u.value.account.id=e.propsAccount.id),c.value.meter.id=u.value.id,null!=u.value.title&&null!=u.value.number?null!=c.value.valueInString&&""!=c.value.valueInString.trim()?(c.value.valueInString=d.value.getValueInString(),c.value.value=c.value.valueInString/(2==u.value.type.id?10:1e4),(0,fe.addMeterAndReading)({meter_type_id:u.value.type.id,meter_title:u.value.title,meter_number:u.value.number,meter_reading_date:new Date(c.value.time).toISOString(),meter_reading:c.value.valueInString,account_id:u.value.account.id}).then((({status:e,data:l})=>{e&&(l.readings.forEach((e=>{r.addReading({id:e.id,meter:{id:e.meter_id},time:new Date(e.reading_date).getTime(),value:c.value.value,valueInString:e.reading_value})})),o.addMeter({account:{id:l.account_id},id:l.id,number:l.meter_number,title:l.meter_title,type:{id:l.meter_type_id}}),t("save"))}))):l.notify({message:"You must enter a reading before saving even if it is all zeroes."}):l.notify({message:"Fill all details before saving."})};function p({title:e,message:t}){l.dialog({dark:!1,title:e,message:t}).onOk((e=>{})).onCancel((()=>{})).onDismiss((()=>{}))}const v=(0,i.iH)(!1),g=e=>{l.notify({attrs:{role:"alertdialog"},message:e,actions:[{icon:"close","aria-label":"Dismiss"}]})};return{readingDate:n,firstReading:c,meter:u,alert:p,addMeter:m,inputFocus:v,meterComopnentReadValue:d,showAlert:g}},components:{MeterComponent:I}});var at=l(3246),it=l(490),nt=l(1233),ot=l(1480),rt=l(1357),st=l(3115),ut=l(2857),dt=l(136),ct=l(1136);const mt=(0,q.Z)(lt,[["render",Xe],["__scopeId","data-v-6debaf93"]]),pt=mt;Ie()(lt,"components",{QCard:Me.Z,QCardSection:Se.Z,QList:at.Z,QItem:it.Z,QItemSection:nt.Z,QRadio:ot.Z,QAvatar:rt.Z,QItemLabel:st.Z,QInput:We.Z,QSeparator:Ce.Z,QBtn:Fe.Z,QPopupProxy:Ze.Z,QDate:Ye.Z,QIcon:ut.Z,QBadge:Ae.Z,QSpace:dt.Z,QCardActions:Re.Z}),Ie()(lt,"directives",{Ripple:ct.Z,ClosePopup:qe.Z});const vt={class:"text-subtitle1"},gt={style:{"font-size":"18px"}},wt={class:"row flex justify-between items-center"},ft={class:"column col-5"},yt=(0,a._)("b",{class:"text-center"},"Daily Usage",-1),_t={class:"medium-rcorners text-h6 text-center",color:"negative","text-color":"white"},bt={class:"column col-5"},ht=(0,a._)("b",{class:"text-center"},"Daily Cost",-1),Dt={class:"medium-rcorners text-h6 text-center",color:"negative","text-color":"white"},kt={class:""},Mt={class:"q-mb-lg"},xt={class:"row no-wrap"},Ct={class:"col"},St={class:"column flex justify-between items-center no-wrap q-mt-md"},At=(0,a._)("b",null,"Monthly Projected cost",-1),Zt={class:"big-rcorners text-h4 text-center",color:"negative","text-color":"white"},Yt={class:"text-center text-h6 q-mt-md"},Ft=(0,a.Uk)("Email"),Wt=(0,a.Uk)("Close");function Rt(e,t,l,i,o,r){const s=(0,a.up)("q-card-section"),u=(0,a.up)("q-separator"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-card-actions"),m=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"bg-grey-2 row justify-center"},{default:(0,a.w5)((()=>{var t;return[(0,a._)("div",vt," Estimated Cost for Meter :- "+(0,n.zw)(null===(t=e.meter)||void 0===t?void 0:t.number),1),(0,a._)("div",gt,(0,n.zw)(e.currentBillPeriod),1)]})),_:1}),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>{var t,l,i,o,r;return[(0,a._)("div",null,[(0,a._)("div",wt,[(0,a._)("div",ft,[yt,(0,a._)("div",_t,(0,n.zw)(2==e.meter.type.id?null===(t=e.usesPerDay)||void 0===t?void 0:t.toFixed(2):null===(l=1e3*e.usesPerDay)||void 0===l?void 0:l.toFixed(2))+" "+(0,n.zw)(e.unit),1)]),(0,a._)("div",bt,[ht,(0,a._)("div",Dt," R"+(0,n.zw)((e.totalProjectionCost/30).toFixed(2)),1)])]),(0,a.Wm)(u,{class:"q-my-md",color:"grey",size:"2px"}),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.projectionCost["projection"],((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"row no-wrap",key:t},[(0,a.wy)((0,a._)("div",{class:"col"},(0,n.zw)(e.title),513),[[V.F8,"VAT"!==e.title]]),(0,a.wy)((0,a._)("div",{class:"col-auto"}," R "+(0,n.zw)(e.value.toFixed(2)),513),[[V.F8,"VAT"!==e.title]])])))),128))]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.waterLevyCostByServer,((t,l)=>{var i,o;return(0,a.wg)(),(0,a.iD)("div",{class:"row no-wrap",key:l},[(0,a.wy)((0,a._)("div",{class:"col"},(0,n.zw)(t.title),513),[[V.F8,"Electricity bill"!==(null===(i=e.projectionCost.projection[0])||void 0===i?void 0:i.title)]]),(0,a.wy)((0,a._)("div",{class:"col-auto"}," R "+(0,n.zw)(t.value.toFixed(2)),513),[[V.F8,"Electricity bill"!==(null===(o=e.projectionCost.projection[0])||void 0===o?void 0:o.title)]])])})),128)),(0,a._)("div",kt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.projectionCost["projection"],((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"row no-wrap",key:t},[(0,a.wy)((0,a._)("div",{class:"col"},(0,n.zw)(e.title),513),[[V.F8,"VAT"===e.title]]),(0,a.wy)((0,a._)("div",{class:"col-auto"}," R "+(0,n.zw)(e.value.toFixed(2)),513),[[V.F8,"VAT"===e.title]])])))),128))]),(0,a._)("div",Mt,[(0,a._)("div",xt,[(0,a._)("div",Ct,(0,n.zw)(null===(i=e.newVATOnMeterBill)||void 0===i?void 0:i.title),1),(0,a.wy)((0,a._)("div",{class:"col-auto"}," R "+(0,n.zw)(null===(o=e.newVATOnMeterBill.value)||void 0===o?void 0:o.toFixed(2)),513),[[V.F8,null===(r=e.newVATOnMeterBill)||void 0===r?void 0:r.value]])])]),(0,a._)("div",St,[At,(0,a._)("div",Zt," R "+(0,n.zw)(e.totalProjectionCost.toFixed(2)),1)]),(0,a.Wm)(u,{color:"grey",class:"q-my-xs",size:"2px"}),(0,a._)("div",Yt,[(0,a._)("div",null,"Date: "+(0,n.zw)(e.lastReadingDisplayFormat.timeDisplay),1),(0,a._)("div",null,"Reading "+(0,n.zw)(e.lastReadingDisplayFormat.value),1)])])]})),_:1}),(0,a.Wm)(c,{align:"evenly"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{color:"grey-2","text-color":"black",onClick:e.submitBill},{default:(0,a.w5)((()=>[Ft])),_:1},8,["onClick"]),(0,a.Wm)(d,{color:"grey-2","text-color":"black",onClick:t[0]||(t[0]=t=>e.$emit("close"))},{default:(0,a.w5)((()=>[Wt])),_:1})])),_:1})])),_:1})}const qt=(0,a.aZ)({name:"MeterCost",props:{meter:Object,isNew:Boolean,account:Object},setup(e){var t,l;const n=(0,j.H)(),s=(0,o.H)(),u=(0,r.c)(),d=u.getAccountById(e.meter.account.id),c=[e.meter],m=(0,Z.Z)(),p=s.getSiteById(d.site.id),v=new we,g=v.getCost,w=(0,i.iH)(0);var f=n.getReadingsByMeterId(null===e||void 0===e||null===(t=e.meter)||void 0===t?void 0:t.id);const y=(0,a.Fl)((()=>{const e=new Array;return(d.defaultFixedCost||[]).forEach((t=>{"Water Loss Levy"===(null===t||void 0===t?void 0:t.fixed_cost.title)&&e.push({title:t.fixed_cost.title,value:t.value||0})})),e})),_=(0,a.Fl)((()=>{let e=null;return(d.defaultFixedCost||[]).forEach((t=>{"Enter Your Billing Date"===(null===t||void 0===t?void 0:t.fixed_cost.title)&&(e=null===t||void 0===t?void 0:t.value)})),e||24})),b=(0,a.Fl)((()=>{let e=null;const t=A.ZP.formatDate(new Date,"DD");if(_.value<=t){var l=A.ZP.formatDate(new Date,"MMM YYYY");let t=A.ZP.addToDate(l,{month:1});e=A.ZP.formatDate(t,"MMM YYYY")}else e=A.ZP.formatDate(new Date,"MMM YYYY");return e})),h=(0,a.Fl)((()=>{let e=null,t=A.ZP.addToDate(b.value,{days:_.value-1}),l=A.ZP.formatDate(t,"DD MMMM"),a=A.ZP.subtractFromDate(l,{month:1}),i=A.ZP.formatDate(a,"DD MMMM");return e=`${i} to ${l}`,e})),D=v.getSubmitedAndLastReading(f,b.value,_.value);w.value=v.calculateUnitForMonth({isLastReadings:D,id:null===e||void 0===e||null===(l=e.meter)||void 0===l?void 0:l.type.id});const k=(0,a.Fl)((()=>{var t,l;return 2==(null===e||void 0===e||null===(t=e.meter)||void 0===t||null===(l=t.type)||void 0===l?void 0:l.id)?"kWh":"L"})),M=[{title:"VAT",onTotalAmount:.15}];String.prototype.insert=function(e,t){return e>0?this.substring(0,e)+t+this.substring(e,this.length):t+this};const x=g(w.value,null===e||void 0===e?void 0:e.meter),C=(0,a.Fl)((()=>{let e=0;return y.value.forEach((({value:t})=>{0===x.projection.length&&(e=e+t||0),x.projection.forEach((({title:l})=>{"Electricity bill"!==l?(e=x.total+t,e=S.value.value+e):(e=x.total,e=S.value.value+e)}))})),e})),S=(0,a.Fl)((()=>{const e=new Object;M.forEach((t=>{y.value.forEach((({value:l})=>{x.projection.forEach((({title:a})=>{"Electricity bill"!==a?(e["title"]=t.title,e["value"]=t.onTotalAmount*x["total"]+l*t.onTotalAmount):(e["title"]=t.title,e["value"]=t.onTotalAmount*x["total"])}))}))}));return e}));function Y(e,t){m.dialog({title:"Confirm",message:`${e}`,cancel:!0,persistent:!0}).onOk((()=>{t()})).onCancel((()=>{}))}const F=()=>{const t=e.meter,l=2==t.type.id?p.email:"eservices@durban.gov.za",a=`Account: ${d.number}`;let i="";i+=`Account Number: ${d.number}\n`,i+=`Account Holder: ${d.title}\n`,c.forEach((e=>{var t=n.getReadingsByMeterId(e.id);const l=v.getSubmitedAndLastReading(t,b.value,_.value),a=l.lastReading;e.type.id;let o="";o=`Current Reading:${2==e.type.id?a.value:a.value.toFixed(2)}\nDate:\t\t\t${A.ZP.formatDate(new Date(a.time),"DD MMMM YYYY")}\n`,i+=`${e.type.title} Meter:\t${e.number}\n`,i+=`${o}\n`,i+="\n\n"})),i+="Powered by The MyCityApp.\n",i+="Visit www.mycities.co.za for information on how we can help you save on electricity and water with cutting edge technologies.";let o="mailto:"+encodeURI(l)+"?subject="+encodeURI(a)+"&body="+encodeURI(i);console.log(i);const r=A.ZP.formatDate(new Date,"DD");r>=25&&r<=23?window.open(o,"_blank"):Y("You are outside the meter reading submission dates. Are you sure you want to email the reading for this meter?",(()=>{window.open(o,"_blank")}))},W=(0,a.Fl)((()=>{const t=A.ZP.formatDate(new Date(D.lastReading.time),"DD MMMM YYYY"),l=2==e.meter.type.id?5:4,a=D.lastReading.valueInString.insert(l,".");return{timeDisplay:t,value:a}}));return{getCost:g,usesPerDay:w,unit:k,projectionCost:x,submitBill:F,lastReadingDisplayFormat:W,waterLevyCostByServer:y,totalProjectionCost:C,percentageCharges:M,newVATOnMeterBill:S,isLastReadings:D,billingCycle:_,billingCycleMonth:b,currentBillPeriod:h}}}),Ut=(0,q.Z)(qt,[["render",Rt]]),It=Ut;Ie()(qt,"components",{QCard:Me.Z,QCardSection:Se.Z,QSeparator:Ce.Z,QCardActions:Re.Z,QBtn:Fe.Z});const jt=(0,s.b)(),Vt=(0,j.H)(),Pt=(0,r.c)(),zt=(0,a.aZ)({name:"MeterReadingSet",props:{meter:Object},setup(e){const t=(0,Z.Z)(),l=(0,S.tv)();var n=[];const o=(0,i.iH)(!1),r=((0,i.iH)(!0),(0,i.iH)(!1)),s=(0,i.iH)(!1),u=(0,a.Fl)((()=>jt.meters.length)),d=(0,i.iH)(Pt.getAccountById(e.meter.account.id)),c=((0,a.Fl)((()=>{let e=0;const t=(n||[]).sort(((e,t)=>e.time-t.time)).reduce(((t,l)=>{var a;const i=new Date(l.time);var n=i.getUTCMonth()+1,o=i.getUTCFullYear();const r=`${o}-${n}`;return(null!==(a=t[r])&&void 0!==a?a:t[r]={group:[],month:n,year:o,index:e++}).group.push({...l}),t}),{});return t})),(0,i.iH)()),m=(0,i.iH)({}),p=(0,i.iH)({}),v=(0,i.iH)(),g=(0,i.iH)(!1),w=()=>{const e=(n||[]).sort(((e,t)=>t.time-e.time));p.value=e[0]||{},m.value=e.find((({isSubmit:e})=>e))||e[e.length-1]||{}},f=()=>{var t;n=Vt.getReadingsByMeterId(null===e||void 0===e||null===(t=e.meter)||void 0===t?void 0:t.id),w()};(0,a.YP)((()=>{var t;return Vt.getReadingsByMeterId(null===e||void 0===e||null===(t=e.meter)||void 0===t?void 0:t.id)}),(e=>{n=e,w()}),{deep:!0}),f();const y=e=>{t.notify({attrs:{role:"alertdialog"},message:e,actions:[{icon:"close","aria-label":"Dismiss"}]})};function _(e,t){l.push({path:`${e}/${t}`})}function b(){const e=p.value.value-m.value.value,t=p.value.time-m.value.time;v.value=e/t*1e3*60*60*24}b();const h=e=>{t.dialog({title:"Confirm",message:"â€œAre you sure you want to delete this meter? All data will be permanently lost.",cancel:!0,persistent:!0}).onOk((()=>{(0,fe.deleteMainMeter)({meter_id:e.id}).then((t=>{200==t.code&&jt.deleteMeter(e)}))}))};return{modelForReadingSet:o,modelCostForMeter:s,firstReading:m,lastReading:p,currentReading:c,showAlert:y,moveTo:_,usesPerDay:v,isExpand:g,modelMeterForNewEdit:r,selectedAccount:d,deleteMeter:h,meterLength:u}},components:{MeterComponent:I,MeterComponentWithInput:Ve,AddMeter:pt,MeterCost:It}});var Ht=l(7858),Qt=l(9003),Et=l(2074);const Bt=(0,q.Z)(zt,[["render",C],["__scopeId","data-v-137e594c"]]),Tt=Bt;Ie()(zt,"components",{QCard:Me.Z,QCardSection:Se.Z,QBtn:Fe.Z,QMenu:Ht.Z,QList:at.Z,QItem:it.Z,QItemSection:nt.Z,QSlideTransition:Qt.Z,QSeparator:Ce.Z,QCardActions:Re.Z,QDialog:Et.Z}),Ie()(zt,"directives",{Ripple:ct.Z,ClosePopup:qe.Z});const Ot=(0,a._)("div",{class:"text-subtitle2"},"Necessary Details",-1),$t={key:1},Lt={key:3},Nt={key:5},Kt=(0,a._)("div",{class:"text-subtitle2"},"Description under Account setup",-1),Jt=(0,a._)("div",{class:"text-subtitle2"},"Additional Data",-1),Gt={class:"flex justify-between items-center"},Xt={key:0,class:"text-h7"};function el(e,t,l,i,o,r){const s=(0,a.up)("q-card-section"),u=(0,a.up)("q-select"),d=(0,a.up)("q-input"),c=(0,a.up)("q-separator"),m=(0,a.up)("q-toggle"),p=(0,a.up)("q-space"),v=(0,a.up)("q-btn"),g=(0,a.up)("q-card-actions"),w=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"bg-primary"},{default:(0,a.w5)((()=>[Ot])),_:1}),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>{var l,i;return[e.isNew?((0,a.wg)(),(0,a.j4)(u,{key:0,color:"black",type:"text",label:"Enter a location address","use-input":"","input-debounce":"0",options:e.siteOptions,onFilter:e.filterFn,behavior:"menu",modelValue:e.site,"onUpdate:modelValue":t[0]||(t[0]=t=>e.site=t),"option-label":"address","emit-value":"","map-options":""},null,8,["options","onFilter","modelValue"])):((0,a.wg)(),(0,a.iD)("div",$t,(0,n.zw)(null===(l=e.site)||void 0===l?void 0:l.address),1)),(0,a._)("h6",null,"Email "+(0,n.zw)(null===(i=e.site)||void 0===i?void 0:i.email),1),e.isNew?((0,a.wg)(),(0,a.j4)(d,{key:2,color:"black",type:"text",label:"Enter name - As per bill",modelValue:e.selectedAccount.title,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedAccount.title=t),modelModifiers:{trim:!0}},null,8,["modelValue"])):((0,a.wg)(),(0,a.iD)("div",Lt,"Name : -"+(0,n.zw)(e.selectedAccount.title),1)),e.isNew?((0,a.wg)(),(0,a.j4)(d,{key:4,color:"black",type:"text",label:"Enter account number - As per bill",modelValue:e.selectedAccount.number,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedAccount.number=t)},null,8,["modelValue"])):((0,a.wg)(),(0,a.iD)("div",Nt,"Account :- "+(0,n.zw)(e.selectedAccount.number),1))]})),_:1}),(0,a.Wm)(s,{class:"bg-primary"},{default:(0,a.w5)((()=>[Kt])),_:1}),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{color:"black",type:"text",label:"Account description",modelValue:e.selectedAccount.option,"onUpdate:modelValue":t[3]||(t[3]=t=>e.selectedAccount.option=t)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(s,{class:"bg-primary"},{default:(0,a.w5)((()=>[Jt])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.isNew?e.selectedAccount.defaultCosts:e.selectedAccount.defaultFixedCost,((t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},[(0,a.Wm)(c),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a._)("div",Gt,[t?((0,a.wg)(),(0,a.iD)("div",Xt,(0,n.zw)(e.isNew?t.title:t.fixed_cost.title),1)):(0,a.kq)("",!0),(0,a.Wm)(m,{modelValue:t.isApplicable,"onUpdate:modelValue":e=>t.isApplicable=e},null,8,["modelValue","onUpdate:modelValue"])]),e.isNew?((0,a.wg)(),(0,a.j4)(d,{key:0,placeholder:"Enter Your Billing Date"===t.title?"Enter Only Dates":"R0.00",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,modelModifiers:{number:!0},type:"number",disable:!t.isApplicable},null,8,["placeholder","modelValue","onUpdate:modelValue","disable"])):((0,a.wg)(),(0,a.j4)(d,{key:1,placeholder:"Enter Your Billing Date"===t.fixed_cost.title?"Enter Only Dates":"R0.00",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,modelModifiers:{number:!0},type:"number",disable:!t.isApplicable},null,8,["placeholder","modelValue","onUpdate:modelValue","disable"]))])),_:2},1024)],64)))),128)),(0,a.Wm)(c),(0,a.Wm)(p),(0,a.Wm)(g,{align:"center"},{default:(0,a.w5)((()=>[e.autoUpdate?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(v,{key:0,color:"red","text-color":"white",class:"q-my-none q-mx-none",label:"Cancel",glossy:"",onClick:t[4]||(t[4]=t=>e.$emit("close"))})),e.autoUpdate?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(v,{key:1,color:"primary","text-color":"black",class:"q-my-none q-mx-noe",label:"Save",glossy:"",onClick:e.onSaveSelectAccount},null,8,["onClick"]))])),_:1})])),_:1})}var tl=l(4710);const ll={id:Date.now(),title:null,number:null,option:null,site:{id:null,email:null},fixedCosts:[],defaultCosts:[]},al=(0,tl.t)(),il=(0,a.aZ)({name:"AccountComponent",props:{account:Object,autoUpdate:{type:Boolean,default:!1}},methods:{},emits:["update:account"],setup(e,{emit:t}){var l,n,s;const u={site:null,selectedAccount:JSON.parse(JSON.stringify(e.account||ll))};u["selectedAccount"]["defaultCosts"]=al.getDefaultCost.map((e=>("Rates Rebate"===e.title?e["isApplicable"]=!1:e["isApplicable"]=!0,e)));const d=(0,o.H)(),c=(0,r.c)(),m=(0,Z.Z)(),p=(0,i.iH)(u.selectedAccount);null===(l=p.value.defaultFixedCost)||void 0===l||l.map((e=>(1===e.is_active?e["isApplicable"]=!0:e["isApplicable"]=!1,e)));const v=null===(n=c.getAccountById(null===p||void 0===p||null===(s=p.value)||void 0===s?void 0:s.id))||void 0===n?void 0:n.id,g=(0,a.Fl)((()=>!(null!=v&&void 0!=v&&v>0))),w=(0,i.iH)(g.value?null:d.getSiteById(p.value.site.id)),f=(0,i.iH)(d.allSites);const y=async()=>{if(null!=w.value&&null!=w.value.email)if(null!=p.value&&p.value.title&&p.value.number){if(g.value)if(w.value.newSite){if(!w.value.latLng)return void M({message:"There is no site contact to developer"});{delete w.value["newSite"];const e=w.value,t=p.value,l=t.defaultCosts.map((e=>({name:e.title,id:e.id,value:e.value,is_active:e.isApplicable?1:0}))).filter((e=>null!==e));(0,fe.addSiteAndAccount)({address:e.address,email:e.email,lat:e.latLng.lat,lng:e.latLng.lng,title:e.email,account_name:t.title,account_number:t.number,optional_information:t.option,default_fixed_cost:l}).then((({status:l,code:a,msg:i,data:n})=>{l&&(d.addSite({id:n.site_id,address:e.address,email:e.email,latLng:{lat:e.latLng.lat,lng:e.latLng.lng},title:n.title,user_id:n.user_id}),c.addAccount({id:n.id,defaultFixedCost:n.default_fixed_costs,number:t.number,option:t.option,site:{id:n.site_id},title:t.title}))}))}}else{const e=p.value,t=e.defaultCosts.map((e=>({name:e.title,value:e.value,id:e.id,is_active:e.isApplicable?1:0}))).filter((e=>null!==e));(0,fe.addSiteAndAccount)({site_id:w.value.id,account_name:e.title,account_number:e.number,optional_information:e.option,default_fixed_cost:t}).then((({status:t,code:l,msg:a,data:i})=>{t&&c.addAccount({id:i.id,defaultFixedCost:i.default_fixed_costs,number:e.number,option:e.option,site:{id:i.site_id},title:e.title})}))}else{const e=p.value,t=e.defaultFixedCost.map((t=>{let l=t.id;const a=e.defaultFixedCost.find((e=>e.fixed_cost.id===t.id));return a&&(l=a.id),{name:t.title,value:t.value,is_active:t.isApplicable?1:0,id:l}})).filter((e=>null!==e));(0,fe.updateAccount)({site_id:w.value.id,account_name:e.title,account_number:e.number,optional_information:e.option,default_fixed_cost:t,account_id:e.id}).then((({status:t,code:l,msg:a,data:i})=>{t&&c.update({id:i.id,defaultFixedCost:i.default_fixed_costs,number:e.number,option:e.option,site:{id:i.site_id},title:e.title})}))}t("save")}else m.notify({message:"Fill valid name and number details"});else m.notify({message:"Invalid address. You need to select a valid location from the suggestions given by the app. Begin typing your address again."})};let _;const b=(e,t)=>{if(""===e)return void t((()=>{f.value=d.allSites}));const l=e.toLowerCase(),a=d.allSites.filter((e=>e.address.toLowerCase().indexOf(l)>-1));0==a.length?(_&&clearTimeout(_),_=setTimeout((()=>{h(e).then((e=>{t((()=>{f.value=e}))}))}),2e3)):t((()=>{f.value=a}))},h=async e=>{try{const t=await(0,fe.suggestLocation)(e);let l=t.data.suggestions;return l=l.map(((e,t)=>({id:`new-${t}`,title:"",latLng:null,magicKey:e.magicKey,address:e.text,newSite:!0}))),l}catch(t){}},D=async(e,t)=>{try{const l=await(0,fe.findAddressCandidates)(e,t);let a=l.data["candidates"].map(((t,l)=>({id:`new-${l}`,title:"",latLng:{lat:t.location.x,lng:t.location.y},address:e,newSite:!0})));return a}catch(l){}},k=(0,a.YP)(w,(async(e,t)=>{if(null!==e&&void 0!==e&&e.magicKey)try{let t=await D(e.address,e.magicKey);if(1==t.length){let{data:e}=await(0,fe.findEmailFromLocation)({x:t[0].latLng.lat,y:t[0].latLng.lng});const l=e;t[0]["email"]=l["features"][0]["attributes"]["MREMAIL"],w.value=t[0]}else M("Choose address")}catch(l){console.log(l)}}));function M({title:e,message:t}){m.dialog({dark:!1,title:e,message:t,cancel:!0,persistent:!1}).onOk((e=>{})).onCancel((()=>{})).onDismiss((()=>{}))}return{selectedAccount:p,onSaveSelectAccount:y,siteOptions:f,filterFn:b,site:w,searchByAddress:h,finLatLngByMagicKey:D,watchSite:k,isNew:g,alert:M}}});var nl=l(7887),ol=l(3175);const rl=(0,q.Z)(il,[["render",el]]),sl=rl;Ie()(il,"components",{QCard:Me.Z,QCardSection:Se.Z,QSelect:nl.Z,QInput:We.Z,QBtn:Fe.Z,QCardActions:Re.Z,QSeparator:Ce.Z,QToggle:ol.Z,QSpace:dt.Z});const ul=e=>((0,a.dD)("data-v-343ddaab"),e=e(),(0,a.Cn)(),e),dl={class:"q-gutter-sm"},cl={class:"text-subtitle1 rounded-borders"},ml={class:"text-subtitle2"},pl=ul((()=>(0,a._)("div",{class:"text-center"},null,-1))),vl={class:"text-h5 col-auto text-center"},gl=ul((()=>(0,a._)("div",{class:"text-subtitle2"},"Water Meters",-1))),wl={class:"q-mb-md q-mt-sm"},fl={class:""},yl={class:"row no-wrap"},_l={class:"q-mt-sm q-mb-sm"},bl=(0,a.Uk)("Email Now"),hl=ul((()=>(0,a._)("div",{class:"text-subtitle2"},"Electricity Meters",-1))),Dl={class:"q-my-md"},kl={class:""},Ml={class:"row no-wrap"},xl=(0,a.Uk)("Email Now"),Cl=ul((()=>(0,a._)("div",{class:"text-subtitle2"},"Additional Charges",-1))),Sl={class:"q-mt-lg"},Al={class:"q-mt-sm"},Zl={class:"row no-wrap"},Yl=ul((()=>(0,a._)("div",{class:"col"},"SubTotal Of All Costs",-1))),Fl={class:"col-auto"},Wl={class:"row no-wrap"},Rl=ul((()=>(0,a._)("div",{class:"col"},"VAT",-1))),ql={class:"col-auto"},Ul={class:"row no-wrap"},Il=ul((()=>(0,a._)("div",{class:"col"},"Total including VAT",-1))),jl={class:"col-auto"},Vl={class:""},Pl={class:"text-h5"},zl={class:"row no-wrap"},Hl=ul((()=>(0,a._)("div",{class:"col"},"Total",-1))),Ql={class:"col-auto"},El=(0,a.Uk)("The amount is calculated based on your inputs and may differ slightly from your actual municipal bill.");function Bl(e,t,l,i,o,r){const s=(0,a.up)("q-icon"),u=(0,a.up)("q-card-section"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-separator"),m=(0,a.up)("q-item-label"),p=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(p,{class:"mainBackground"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"text-h6 headline text-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{name:"chevron_left",style:{"margin-top":"-5px"},size:"lg",class:"cursor-pointer",onClick:t[0]||(t[0]=t=>e.previousMonth(e.readingPeriod))}),(0,a._)("span",dl," Projected bill for "+(0,n.zw)(e.readingPeriod),1),(0,a.Wm)(s,{style:{"margin-top":"-5px"},name:"chevron_right",size:"lg",class:"cursor-pointer",onClick:t[1]||(t[1]=t=>e.nextMonth(e.readingPeriod))}),(0,a._)("div",cl,(0,n.zw)(e.currentBillPeriod),1),(0,a._)("div",ml,"Current Date:- "+(0,n.zw)(e.currentDate),1)])),_:1}),pl,(0,a._)("div",vl," R "+(0,n.zw)(e.totalFullBill.toFixed(2)),1),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"titleofcost"},{default:(0,a.w5)((()=>[gl])),_:1}),(0,a._)("div",wl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.calculationsForMeters,((t,l)=>{var i;return(0,a.wg)(),(0,a.iD)(a.HY,{key:l},[(0,a.wy)((0,a._)("div",{class:"text-subtitle2 q-mb-sm"}," Meter: "+(0,n.zw)(t.meter.number),513),[[V.F8,1===t.meter.type.id&&"Water in"===t.title]]),(0,a._)("div",fl,[(0,a._)("div",yl,[(0,a.wy)((0,a._)("div",{class:"col"},(0,n.zw)(t.title),513),[[V.F8,"Electricity bill"!==t.title]]),(0,a.wy)((0,a._)("div",{class:"text-blue-7 q-mr-md col"},(0,n.zw)(null===(i=t.totalReadingOfMonth)||void 0===i?void 0:i.toFixed(2))+" KL ",513),[[V.F8,null!==t.totalReadingOfMonth]]),(0,a.wy)((0,a._)("div",{class:"col-auto"}," R "+(0,n.zw)(t.value.toFixed(2)),513),[[V.F8,"Electricity bill"!==t.title]])]),(0,a._)("div",_l,[(0,a.wy)((0,a.Wm)(d,{color:"blue-2",rounded:"",unelevated:"","text-color":"black",size:"sm",onClick:l=>e.submitFullBill(t.meter)},{default:(0,a.w5)((()=>[bl])),_:2},1032,["onClick"]),[[V.F8,"Sewage Disposal Charge"===t.title]])])])],64)})),128))]),(0,a.Wm)(u,{class:"titleofcost"},{default:(0,a.w5)((()=>[hl])),_:1}),(0,a._)("div",Dl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.calculationsForMeters,((t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},[(0,a.wy)((0,a._)("div",{class:"text-subtitle2 q-mb-sm"}," Meter: "+(0,n.zw)(t.meter.number),513),[[V.F8,2===t.meter.type.id&&0!==t.value]]),(0,a._)("div",kl,[(0,a.wy)((0,a._)("div",Ml,[(0,a.wy)((0,a._)("div",{class:"col"},(0,n.zw)(t.title),513),[[V.F8,"Electricity bill"===t.title]]),(0,a.wy)((0,a._)("div",{class:"col text-blue-7 q-mr-md"},(0,n.zw)((t.value/2.2425).toFixed(1))+" kWh ",513),[[V.F8,"Electricity bill"===t.title]]),(0,a.wy)((0,a._)("div",{class:"col-auto"}," R "+(0,n.zw)(t.value.toFixed(2)),513),[[V.F8,"Electricity bill"===t.title]])],512),[[V.F8,0!==t.value]]),(0,a.wy)((0,a._)("div",null,[(0,a.wy)((0,a.Wm)(d,{class:"q-mt-sm",color:"blue-2",rounded:"",unelevated:"","text-color":"black",size:"sm",onClick:l=>e.submitFullBill(t.meter)},{default:(0,a.w5)((()=>[xl])),_:2},1032,["onClick"]),[[V.F8,"Electricity bill"===t.title]])],512),[[V.F8,0!==t.value]])])],64)))),128))]),(0,a.Wm)(u,{class:"titleofcost"},{default:(0,a.w5)((()=>[Cl])),_:1}),(0,a._)("div",Sl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.calculationsForAccount,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"row no-wrap",key:t},[(0,a.wy)((0,a._)("div",{class:"col"},(0,n.zw)(e.title),513),[[V.F8,"Rates"!==e.title&&"Enter Your Billing Date"!==e.title&&"Rates Rebate"!==e.title]]),(0,a.wy)((0,a._)("div",{class:"col-auto"}," R "+(0,n.zw)(e.value.toFixed(2)),513),[[V.F8,"Rates"!==e.title&&"Enter Your Billing Date"!==e.title&&"Rates Rebate"!==e.title]])])))),128))]),(0,a.Wm)(c,{class:"q-my-sm"}),(0,a._)("div",Al,[(0,a._)("div",Zl,[Yl,(0,a._)("div",Fl,"R "+(0,n.zw)(e.additionalAllCost.toFixed(2)),1)])]),(0,a._)("div",null,[(0,a._)("div",Wl,[Rl,(0,a._)("div",ql,"R "+(0,n.zw)(e.totalVAT.toFixed(2)),1)])]),(0,a._)("div",null,[(0,a._)("div",Ul,[Il,(0,a._)("div",jl,"R "+(0,n.zw)(e.VATonAdditionalCost.toFixed(2)),1)])]),(0,a._)("div",Vl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.calculationsForAccount,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"row no-wrap",key:t},[(0,a.wy)((0,a._)("div",{class:"col"},(0,n.zw)(e.title),513),[[V.F8,"Rates"===e.title||"Rates Rebate"===e.title]]),(0,a.wy)((0,a._)("div",{class:"col-auto"}," R "+(0,n.zw)("Rates Rebate"===e.title?-e.value.toFixed(2):e.value.toFixed(2)),513),[[V.F8,"Rates"===e.title||"Rates Rebate"===e.title]])])))),128))])])),_:1}),(0,a.Wm)(c,{class:"q-my-sm"}),(0,a.Wm)(u,{class:"bg-white"},{default:(0,a.w5)((()=>[(0,a._)("div",Pl,[(0,a._)("div",zl,[Hl,(0,a._)("div",Ql,"R "+(0,n.zw)(e.totalFullBill.toFixed(2)),1)])]),(0,a.Wm)(m,{class:"q-mt-md",caption:""},{default:(0,a.w5)((()=>[El])),_:1})])),_:1})])),_:1})}const Tl=(0,a.aZ)({name:"AccountCost",props:{account:Object},setup(e){const t=(0,j.H)(),l=(0,s.b)(),n=(0,o.H)(),r=(0,Z.Z)(),u=l.getByAccuntId(e.account.id),d=n.getSiteById(e.account.site.id),c=new we,m=(0,a.Fl)((()=>{const t=new Array;return(e.account.defaultFixedCost||[]).forEach((e=>{var l;e.is_active&&t.push({title:null===(l=e.fixed_cost)||void 0===l?void 0:l.title,value:(null===e||void 0===e?void 0:e.value)||0})})),t})),p=(0,a.Fl)((()=>{let e=null;return m.value.forEach((({title:t,value:l})=>{"Enter Your Billing Date"===t&&(e=l)})),e||24})),v=(0,a.Fl)((()=>{let e=null;const t=A.ZP.formatDate(new Date,"DD");if(p.value<=t){var l=A.ZP.formatDate(new Date,"MMM YYYY");let t=A.ZP.addToDate(l,{month:1});e=A.ZP.formatDate(t,"MMM YYYY")}else e=A.ZP.formatDate(new Date,"MMM YYYY");return e})),g=(0,i.iH)(v.value),w=(0,i.iH)(A.ZP.formatDate(new Date,"DD MMMM YYYY")),f=e=>{let l=new Array;u.forEach((e=>{var a=t.getReadingsByMeterId(e.id);return l=a[a.length-1].time}));let a=A.ZP.formatDate(l,"MMM YYYY");if(e!==a){const t=A.ZP.subtractFromDate(e,{months:1});g.value=A.ZP.formatDate(t,"MMM YYYY")}},y=e=>{let t=A.ZP.addToDate(new Date,{months:1}),l=A.ZP.formatDate(t,"MMM YYYY");if(e!==l){const t=A.ZP.addToDate(e,{months:1});g.value=A.ZP.formatDate(t,"MMM YYYY")}},_=(0,a.Fl)((()=>{let e=null,t=A.ZP.addToDate(g.value,{days:p.value-1}),l=A.ZP.formatDate(t,"DD MMMM"),a=A.ZP.subtractFromDate(l,{month:1}),i=A.ZP.formatDate(a,"DD MMMM");return e=`${i} to ${l}`,e})),b=(0,a.Fl)((()=>{const e=new Array;return u.forEach((l=>{var a=t.getReadingsByMeterId(l.id);const i=c.getSubmitedAndLastReading(a,g.value,p.value),n=c.calculateUnitForMonth({isLastReadings:i,id:l.type.id}),o=c.getCost(n,l);o.projection.forEach((t=>{e.push({title:t.title,value:t.value,totalReadingOfMonth:t.reading||null,meter:l})}))})),e})),h=(0,a.Fl)((()=>{let e=0;return b.value.forEach((({value:t})=>{e+=t})),m.value.forEach((({title:t,value:l})=>{"Rates"!==t&&"Enter Your Billing Date"!==t&&"Rates Rebate"!==t&&(e+=l)})),.15*e})),D=(0,a.Fl)((()=>{let t=0,l=e.account.defaultFixedCost.map((e=>{if(1===e.is_active)return e.value||0}));const a=e=>{const t=e.reduce(((e,t)=>e+(t||0)),0);return t};return t+=a(l),b.value.forEach((({value:e})=>{t+=e})),m.value.forEach((({title:e,value:l})=>{"Rates"===e&&(t-=l),"Enter Your Billing Date"===e&&(t-=l),"Rates Rebate"===e&&(t-=l)})),t})),k=(0,a.Fl)((()=>{let e=D.value;return e+.15*e})),M=(0,a.Fl)((()=>{let e=0;return b.value.forEach((({value:t})=>{e+=t})),m.value.forEach((({title:t,value:l})=>{"Rates Rebate"===t&&(e-=2*l),"Enter Your Billing Date"===t&&(p.value=l,e-=l),e+=l})),e+=h.value,e}));function x(e,t){r.dialog({title:"Confirm",message:`${e}`,cancel:!0,persistent:!0}).onOk((()=>{t()})).onCancel((()=>{}))}const C=l=>{const a=2==l.type.id?d.email:"eservices@durban.gov.za",i=`Account: ${e.account.id}`;let n="";n+=`Meter reading:  ${g.value}\n`,String.prototype.insert=function(e,t){return e>0?this.substring(0,e)+t+this.substring(e,this.length):t+this};var o=t.getReadingsByMeterId(l.id);const r=c.getSubmitedAndLastReading(o,g.value,p.value),s=r.lastReading;l.type.id;let u="";u=`Current Reading:${2==l.type.id?s.value:s.value.toFixed(2)}\nDate:\t\t\t${A.ZP.formatDate(new Date(s.time),"DD MMMM YYYY")}\n`,n+=`Account Number: ${e.account.number}\n`,n+=`Account Holder: ${e.account.title}\n`,n+=`${l.type.title} Meter:${l.number}\n`,n+=`${u}\n`,n+="\n\n",n+="Powered by The MyCityApp.\n",n+="Visit www.mycities.co.za for information on how we can help you save on electricity and water with cutting edge technologies.";let m="mailto:"+encodeURI(a)+"?subject="+encodeURI(i)+"&body="+encodeURI(n);console.log(n);const v=A.ZP.formatDate(new Date,"DD");v>=25&&v<=23?window.open(m,"_blank"):x("You are outside the meter reading submission dates. Are you sure you want to email the reading for this meter?",(()=>{window.open(m,"_blank")}))};return{calculationsForMeters:b,calculationsForAccount:m,totalFullBill:M,readingPeriod:g,submitFullBill:C,totalVAT:h,additionalAllCost:D,VATonAdditionalCost:k,previousMonth:f,nextMonth:y,currentDate:w,currentBillPeriod:_,billingCycle:p}}}),Ol=(0,q.Z)(Tl,[["render",Bl],["__scopeId","data-v-343ddaab"]]),$l=Ol;function Ll(e,t,l,i,o,r){const s=(0,a.up)("q-card-section"),u=(0,a.up)("MeterHistory"),d=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"bg-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)(" History Account - "+(0,n.zw)(e.account.title),1)])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.meters,(e=>((0,a.wg)(),(0,a.j4)(s,{key:e.id},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{meter:e},null,8,["meter"])])),_:2},1024)))),128))])),_:1})}function Nl(e,t,l,i,o,r){const s=(0,a.up)("q-td"),u=(0,a.up)("q-btn"),d=(0,a.up)("q-tr"),c=(0,a.up)("q-table");return(0,a.wg)(),(0,a.j4)(c,{dense:e.$q.screen.xs,class:"my-sticky-header-table",title:` ${e.meter.type.title} : ${e.meter.title} ( ${e.meter.number} )`,rows:e.readings,columns:e.columns,"row-key":"name",flat:"",bordered:""},{body:(0,a.w5)((t=>[(0,a.Wm)(d,{props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{key:"time",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.date.formatDate(new Date(t.row.time),"DD/MM/YYYY")),1)])),_:2},1032,["props"]),(0,a.Wm)(s,{key:"value",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.value),1)])),_:2},1032,["props"]),(0,a.Wm)(s,{key:"isSubmit",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.isSubmit?"Yes":"-"),1)])),_:2},1032,["props"]),(0,a.Wm)(s,{key:"isDelete",props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{icon:"delete",flat:"",onClick:l=>e.deleteReading(t.row.id)},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["dense","title","rows","columns"])}Ie()(Tl,"components",{QCard:Me.Z,QCardSection:Se.Z,QBtn:Fe.Z,QIcon:ut.Z,QSeparator:Ce.Z,QItemLabel:st.Z,QCardActions:Re.Z});const Kl=[{name:"time",label:"Date",align:"center",sortable:!0},{name:"value",label:"Reading",align:"center",field:"value"},{name:"isSubmit",label:"Submit",align:"center"},{name:"isDelete",label:"Delete",align:"center"}],Jl=(0,a.aZ)({name:"MeterHistory",props:{meter:Object},setup(e){const t=(0,j.H)(),l=(0,a.Fl)((()=>t.getReadingsByMeterId(e.meter.id))),i=(0,Z.Z)(),n=e=>{i.dialog({title:"Confirm",message:"Are you sure you want to delete this entry? This may change your bills calculation.",cancel:!0,persistent:!0}).onOk((()=>{(0,fe.deleteMeterReadings)({reading_id:e}).then((l=>{200==l.code&&t.deleteReadings(e)}))}))};return{readings:l,columns:Kl,date:A.ZP,deleteReading:n}}});var Gl=l(1463),Xl=l(3532),ea=l(7220);const ta=(0,q.Z)(Jl,[["render",Nl]]),la=ta;Ie()(Jl,"components",{QTable:Gl.Z,QTr:Xl.Z,QTd:ea.Z,QBtn:Fe.Z});const aa=(0,a.aZ)({name:"AccountHistory",props:{account:Object},setup(e){const t=(0,s.b)(),l=t.getByAccuntId(e.account.id);return{meters:l}},components:{MeterHistory:la}}),ia=(0,q.Z)(aa,[["render",Ll]]),na=ia;Ie()(aa,"components",{QCard:Me.Z,QCardSection:Se.Z});const oa=(0,a.Uk)("Select"),ra=(0,a.Uk)("Select"),sa=(0,a.Uk)("Select"),ua=(0,a.Uk)("Select"),da=(0,a.Uk)("Full Bill"),ca=(0,a.Uk)("History"),ma=(0,a.Uk)("Edit Account"),pa=(0,a.Uk)("Delete Account"),va=(0,a.Uk)("Add Account"),ga=(0,a.Uk)(" Add New Account "),wa=(0,a.Uk)("Meters"),fa=(0,a.Uk)(" Add New Meters "),ya={class:"column"},_a=(0,a.Uk)(" Start "),ba={__name:"MainPage",setup(e){const t=(0,o.H)(),l=(0,r.c)(),d=(0,s.b)(),c=((0,u.L)(),(0,Z.Z)()),m=t.allSites,p=(d.allMeters,e=>l.getAccountsById(e)),v=e=>d.getByAccuntId(e),g=()=>{var e;v(null===(e=l.selectedAccount)||void 0===e?void 0:e.id).length>0?c.loading.hide():(c.loading.show(),setTimeout((()=>{c.loading.hide()}),1e3))},w=((0,i.iH)(!0),(0,i.iH)(!0)),f=(0,i.iH)(!0),y=(0,i.iH)(!1),_=(0,i.iH)(!1),b=(0,i.iH)(!1),h=(0,i.iH)(!1),D=e=>{t.selectedSite=e,l.selectedAccount=null,d.selectedMeter=null,w.value=!0},k=e=>{l.selectedAccount=e,d.selectedMeter=null,f.value=!0,(0,fe.fetchAndSaveMeterOnAccount)(e.id)},M=e=>{let t=d.getByAccuntId(e.id);t.length||[]>0?c.notify({message:"You can only delete an account after you delete all meters associated with the account.",color:"error"}):c.dialog({title:"Confirm",message:"Are you sure you want to delete this account? All data will be permanently lost.",cancel:!0,persistent:!0}).onOk((()=>{(0,fe.deleteMainAccount)({account_id:e.id}).then((t=>{200==t.code&&l.deleteAccount(e)}))}))};return(e,o)=>{const r=(0,a.up)("q-item-section"),s=(0,a.up)("q-item-label"),u=(0,a.up)("q-btn"),d=(0,a.up)("q-item"),c=(0,a.up)("q-expansion-item"),x=(0,a.up)("q-list"),C=(0,a.up)("q-menu"),S=(0,a.up)("q-separator"),A=(0,a.up)("q-page"),Z=(0,a.up)("q-dialog"),Y=(0,a.Q2)("close-popup"),F=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,i.SU)(m).length>0?((0,a.wg)(),(0,a.j4)(A,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{bordered:"",separator:""},{default:(0,a.w5)((()=>[(0,i.SU)(m).length>0?((0,a.wg)(),(0,a.j4)(c,{key:0,dense:"",group:"accordion","expand-separator":"","default-opened":!0,"header-class":"bg-primary",class:"q-mt-sm"},{header:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"font-size larger"},{default:(0,a.w5)((()=>{var e;return[(0,a.Uk)("Location - "+(0,n.zw)((null===(e=(0,i.SU)(t).selectedSite)||void 0===e?void 0:e.address)||"Select A Location"),1)]})),_:1})])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(m),(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.id},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.address),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(r,{center:"",side:""},{default:(0,a.w5)((()=>[e==(0,i.SU)(t).selectedSite?((0,a.wg)(),(0,a.j4)(u,{key:0,rounded:"",color:"primary","text-color":"black",onClick:t=>D(e),icon:"check"},{default:(0,a.w5)((()=>[oa])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.j4)(u,{key:1,rounded:"",color:"primary","text-color":"black",onClick:t=>D(e)},{default:(0,a.w5)((()=>[ra])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,a.kq)("",!0),(0,i.SU)(t).selectedSite?((0,a.wg)(),(0,a.j4)(c,{key:1,dense:"",group:"accordion","expand-separator":"","default-opened":!0,modelValue:w.value,"onUpdate:modelValue":o[2]||(o[2]=e=>w.value=e),"header-class":"bg-primary",class:"q-mt-sm"},{header:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"font-size larger"},{default:(0,a.w5)((()=>{var e;return[(0,a.Uk)("Accounts - "+(0,n.zw)((null===(e=(0,i.SU)(l).selectedAccount)||void 0===e?void 0:e.number)||"Select An Account"),1)]})),_:1})])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p((0,i.SU)(t).selectedSite.id),(e=>((0,a.wg)(),(0,a.iD)(a.HY,{key:e.id},[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"text-h6"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.number),1)])),_:2},1024),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.option),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(r,{center:"",side:""},{default:(0,a.w5)((()=>[e==(0,i.SU)(l).selectedAccount?((0,a.wg)(),(0,a.j4)(u,{key:0,rounded:"",color:"primary","text-color":"black",onClick:t=>(k(e),g()),icon:"check"},{default:(0,a.w5)((()=>[sa])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.j4)(u,{key:1,rounded:"",color:"primary","text-color":"black",onClick:t=>(k(e),g())},{default:(0,a.w5)((()=>[ua])),_:2},1032,["onClick"])),(0,a.Wm)(u,{flat:"",size:"lg",icon:"more_horiz","text-color":"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{anchor:"center middle",self:"center middle"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:"",onClick:t=>{(0,i.SU)(l).selectedAccount=e,b.value=!0}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[da])),_:1})])),_:2},1032,["onClick"])),[[Y]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:"",onClick:t=>{(0,i.SU)(l).selectedAccount=e,h.value=!0}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[ca])),_:1})])),_:2},1032,["onClick"])),[[Y]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:"",onClick:t=>{(0,i.SU)(l).selectedAccount=e,y.value=!0}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[ma])),_:1})])),_:2},1032,["onClick"])),[[Y]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:"",onClick:t=>M(e)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[pa])),_:1})])),_:2},1032,["onClick"])),[[Y]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:"",onClick:o[0]||(o[0]=e=>{(0,i.SU)(l).selectedAccount=null,y.value=!0})},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[va])),_:1})])),_:1})),[[Y]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,a.Wm)(S)],64)))),128)),(0,a.Wm)(S),0==p((0,i.SU)(t).selectedSite.id).length?((0,a.wg)(),(0,a.j4)(d,{key:0,class:"justify-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{color:"primary",rounded:"",outline:"","text-color":"black",icon:"add",onClick:o[1]||(o[1]=e=>y.value=!0)},{default:(0,a.w5)((()=>[ga])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1},8,["modelValue"])):(0,a.kq)("",!0),(0,i.SU)(l).selectedAccount?((0,a.wg)(),(0,a.j4)(c,{key:2,dense:"",group:"accordion","expand-separator":"","default-opened":!0,modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=e=>f.value=e),"header-class":"bg-primary",class:"q-mt-sm"},{header:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"font-size larger"},{default:(0,a.w5)((()=>[wa])),_:1})])),default:(0,a.w5)((()=>{var e,t;return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(v(null===(e=(0,i.SU)(l).selectedAccount)||void 0===e?void 0:e.id),(e=>((0,a.wg)(),(0,a.iD)(a.HY,{key:e.id},[(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:"",class:"q-px-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)(Tt,{key:e.id,meter:{...e}},null,8,["meter"]))])),_:2},1024)])),_:2},1024)),[[F]]),(0,a.Wm)(S,{color:"black"})],64)))),128)),0==v(null===(t=(0,i.SU)(l).selectedAccount)||void 0===t?void 0:t.id).length?((0,a.wg)(),(0,a.j4)(d,{key:0,class:"justify-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{color:"primary",rounded:"",outline:"","text-color":"black",icon:"add",onClick:o[3]||(o[3]=e=>_.value=!0)},{default:(0,a.w5)((()=>[fa])),_:1})])),_:1})):(0,a.kq)("",!0)]})),_:1},8,["modelValue"])):(0,a.kq)("",!0)])),_:1})])),_:1})):(0,a.kq)("",!0),0==(0,i.SU)(m).length?((0,a.wg)(),(0,a.j4)(A,{key:1,class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a._)("div",ya,[(0,a.Wm)(u,{color:"primary",rounded:"","text-color":"black",onClick:o[5]||(o[5]=e=>y.value=!0)},{default:(0,a.w5)((()=>[_a])),_:1})])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(Z,{modelValue:h.value,"onUpdate:modelValue":o[8]||(o[8]=e=>h.value=e),onHide:o[9]||(o[9]=e=>h.value=!1),"full-width":!0,"full-height":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(na,{account:(0,i.SU)(l).selectedAccount,onClose:o[6]||(o[6]=e=>h.value=!1),onSave:o[7]||(o[7]=e=>h.value=!1)},null,8,["account"])])),_:1},8,["modelValue"]),(0,a.Wm)(Z,{modelValue:b.value,"onUpdate:modelValue":o[12]||(o[12]=e=>b.value=e),onHide:o[13]||(o[13]=e=>b.value=!1),"full-width":!0,"full-height":!1},{default:(0,a.w5)((()=>[(0,a.Wm)($l,{account:(0,i.SU)(l).selectedAccount,onClose:o[10]||(o[10]=e=>b.value=!1),onSave:o[11]||(o[11]=e=>b.value=!1)},null,8,["account"])])),_:1},8,["modelValue"]),(0,a.Wm)(Z,{modelValue:y.value,"onUpdate:modelValue":o[16]||(o[16]=e=>y.value=e),onHide:o[17]||(o[17]=e=>y.value=!1),"full-width":!0,"full-height":!0,persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(sl,{account:(0,i.SU)(l).selectedAccount,onClose:o[14]||(o[14]=e=>y.value=!1),onSave:o[15]||(o[15]=e=>y.value=!1)},null,8,["account"])])),_:1},8,["modelValue"]),(0,a.Wm)(Z,{modelValue:_.value,"onUpdate:modelValue":o[20]||(o[20]=e=>_.value=e),onHide:o[21]||(o[21]=e=>_.value=!1),"full-width":!0,"full-height":!0,persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(pt,{propsMeter:null,propsAccount:(0,i.SU)(l).selectedAccount,onClose:o[18]||(o[18]=e=>_.value=!1),onSave:o[19]||(o[19]=e=>_.value=!1)},null,8,["propsAccount"])])),_:1},8,["modelValue"])],64)}}};var ha=l(9885),Da=l(651);const ka=(0,q.Z)(ba,[["__scopeId","data-v-6370a3ec"]]),Ma=ka;Ie()(ba,"components",{QPage:ha.Z,QList:at.Z,QExpansionItem:Da.Z,QItemSection:nt.Z,QItem:it.Z,QItemLabel:st.Z,QBtn:Fe.Z,QMenu:Ht.Z,QSeparator:Ce.Z,QDialog:Et.Z}),Ie()(ba,"directives",{Ripple:ct.Z,ClosePopup:qe.Z})},6889:(e,t,l)=>{e.exports=l.p+"img/logo_small.d070fa52.png"}}]);