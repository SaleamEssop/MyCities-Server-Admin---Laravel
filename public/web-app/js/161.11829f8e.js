"use strict";(globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[]).push([[161],{5161:(a,e,t)=>{t.r(e),t.d(e,{default:()=>z});var n=t(9835),l=t(6970);const r=a=>((0,n.dD)("data-v-31d39585"),a=a(),(0,n.Cn)(),a),s=r((()=>(0,n._)("span",{class:"q-ml-sm"},"Loading...",-1))),u=r((()=>(0,n._)("strong",null,"Latest Reading:",-1))),d=r((()=>(0,n._)("strong",null,"Previous Reading:",-1))),i=r((()=>(0,n._)("strong",null,"Usage:",-1))),o=r((()=>(0,n._)("strong",null,"Cost:",-1)));function g(a,e,t,r,g,c){const p=(0,n.up)("q-card-section"),_=(0,n.up)("q-spinner"),v=(0,n.up)("q-banner"),m=(0,n.up)("q-card"),w=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"q-pa-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n._)("h5",null,"Latest Usage for Meter ID: "+(0,l.zw)(r.meterId),1)])),_:1}),r.loading?((0,n.wg)(),(0,n.j4)(p,{key:0},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{color:"primary",size:"3em"}),s])),_:1})):r.error?((0,n.wg)(),(0,n.j4)(p,{key:1},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{class:"bg-negative text-white"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(r.error),1)])),_:1})])),_:1})):((0,n.wg)(),(0,n.j4)(p,{key:2},{default:(0,n.w5)((()=>[(0,n._)("p",null,[u,(0,n.Uk)(" "+(0,l.zw)(r.latestReading),1)]),(0,n._)("p",null,[d,(0,n.Uk)(" "+(0,l.zw)(r.previousReading),1)]),(0,n._)("p",null,[i,(0,n.Uk)(" "+(0,l.zw)(r.usage)+" units",1)]),(0,n._)("p",null,[o,(0,n.Uk)(" $"+(0,l.zw)(r.cost),1)])])),_:1}))])),_:1})])),_:1})}var c=t(499),p=t(8339),_=t(1569);const v={setup(){const a=(0,p.yj)(),e=a.params.id,t=(0,c.iH)(null),l=(0,c.iH)(null),r=(0,c.iH)(null),s=(0,c.iH)(null),u=(0,c.iH)(!0),d=(0,c.iH)(null),i=async()=>{try{const a=await _.api.get("/v1/meter/latest-usage",{params:{meter_id:e}});a.data.status?(t.value=a.data.latestReading.reading_value,l.value=a.data.previousReading.reading_value,r.value=a.data.usage,s.value=a.data.cost):d.value=a.data.msg||"Failed to fetch usage data."}catch(i){var a,n;d.value=(null===(a=i.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.msg)||"An unexpected error occurred."}finally{u.value=!1}};return(0,n.bv)((()=>{i()})),{meterId:e,latestReading:t,previousReading:l,usage:r,cost:s,loading:u,error:d}}};var m=t(1639),w=t(9885),f=t(4458),k=t(3190),h=t(3940),y=t(7128),R=t(9984),b=t.n(R);const q=(0,m.Z)(v,[["render",g],["__scopeId","data-v-31d39585"]]),z=q;b()(v,"components",{QPage:w.Z,QCard:f.Z,QCardSection:k.Z,QSpinner:h.Z,QBanner:y.Z})}}]);