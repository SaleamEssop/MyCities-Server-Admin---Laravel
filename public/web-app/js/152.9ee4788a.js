"use strict";(globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[]).push([[152],{4187:(e,t,a)=>{a.d(t,{t:()=>s,w:()=>i});var l=a(1569);const i=(e,t)=>l.api.get(`/v1/meters/${e}/cost-estimation`,{params:{month:t}}),s=(e,t)=>l.api.get(`/v1/meters/account/${e}/complete-bill`,{params:{month:t}})},2947:(e,t,a)=>{a.d(t,{Y:()=>n});var l=a(1448),i=a(4170),s=a(9302);const n=()=>{const e=(0,s.Z)();return{mailCost(t){const a=t.current_date,s=t.meter_details,n=t.usage,r=t.account,m=s.meter_type_id===l.w?r.water_email:r.electricity_email,o=`Account: ${r.account_number}`;let d="";d+=`Account Number: ${r.account_number}\n`,d+=`Account Holder: ${r.account_name}\n`,s.meter_type_id===l.w?d+=`Water Meter: ${s.meter_title}\n`:s.meter_type_id===l.E&&(d+=`Electricity Meter: ${s.meter_title}\n`),d+=`Current Reading: ${n.reading}\n`,d+=`Date: ${a}\n\n\n\n\n`,d+="Powered by the MyCities App.\n",d+="Visit www.mycities.co.za for information on how we can help you save on electricity and water with cutting edge technologies.";let u="mailto:"+encodeURI(m)+"?subject="+encodeURI(o)+"&body="+encodeURI(d);const c=i.ZP.formatDate(new Date,"DD");c>=25&&c<=23?window.open(u,"_blank"):e.dialog({title:"Confirm",message:"You are outside the meter reading submission dates. Are you sure you want to email the reading for this meter?",cancel:!0,persistent:!0}).onOk((()=>{window.open(u,"_blank")})).onCancel((()=>{}))}}}},5990:(e,t,a)=>{a.d(t,{h:()=>i});const l=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),i=()=>({numberFormat(e){return"number"!==typeof e?e:l.format(e)}})},6094:(e,t,a)=>{a.d(t,{z:()=>s});var l=a(1448);const i=new Intl.NumberFormat("en-US"),s=()=>({unitFormat(e,t){return"number"!==typeof e?e:t===l.w?`${i.format(e)} kL`:t===l.E?`${i.format(e)} kWh`:void 0},klToLitters(e){return"number"!==typeof e?e:`${i.format(1e3*e)} L`}})},1448:(e,t,a)=>{a.d(t,{E:()=>i,w:()=>l});const l=1,i=2},4152:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ae});a(8964);var l=a(9835),i=a(6970),s=a(499),n=a(8339),r=a(4187),m=a(5990),o=a(6094),d=a(2947);const u=e=>((0,l.dD)("data-v-1074d831"),e=e(),(0,l.Cn)(),e),c={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},w={class:"medium-text"},_={class:"medium-text"},v={class:"medium-text"},y={key:0,class:"q-ma-sm q-pa-sm",style:{display:"flex","justify-content":"center","align-items":"center","min-height":"300px"}},f=u((()=>(0,l._)("div",{style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},[(0,l._)("span",{class:"large-text"},"Water Meters")],-1))),g={key:0},p={style:{"justify-content":"space-between","align-items":"center"},class:"flex","aria-label":"heading"},b={class:"large-text"},k=(0,l.Uk)("Email Now"),W=(0,l.Uk)("Water in"),h=(0,l.Uk)("Water Out"),q=(0,l.Uk)(" There is no data for water meters "),U=u((()=>(0,l._)("div",{style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},[(0,l._)("span",{class:"large-text"},"Electricity Meters")],-1))),x={key:2},z={style:{"justify-content":"space-between"},class:"flex","aria-label":"heading"},D={class:"large-text"},S=(0,l.Uk)("Email Now"),F=(0,l.Uk)("Electricity"),C=(0,l.Uk)(" There is no data for electricity meters "),j=u((()=>(0,l._)("div",{style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},[(0,l._)("span",{class:"large-text"},"Additional Costs")],-1))),H=(0,l.Uk)("Subtotal"),R=(0,l.Uk)("VAT"),T=(0,l.Uk)("Total Including VAT"),Y={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},Z=u((()=>(0,l._)("span",{class:"large-text"},"Total",-1))),$={class:"large-text"},Q=(0,l.Uk)(" Note: The amount is calculated based on your inputs and may differ slightly from your actual municipal bill. "),I={__name:"FullBill",setup(e){const t=(0,d.Y)(),a=(0,n.yj)(),u=(0,n.tv)(),I=(0,m.h)(),A=(0,o.z)(),E=(0,s.iH)({}),K=(0,s.iH)(!1);let M=a.query.month;M<0&&u.replace({...a,query:{...a.query,month:1}});const N=(0,s.iH)(a.query.month||1);function L(){var e;null!==(e=E.value)&&void 0!==e&&e.has_history&&(N.value++,u.push({...a,query:{...a.query,month:N.value}}))}function B(){N.value--,u.push({...a,query:{...a.query,month:N.value}})}async function P(){try{E.value=await(0,r.t)(a.params.id,N.value),K.value=!1}catch(e){K.value=!0,E.value=e.response.data}}return(0,l.m0)((async()=>{N.value=a.query.month||1,await P()})),(0,l.bv)((()=>{P().then()})),(e,n)=>{var r,m,o,d,u,M,P,V;const O=(0,l.up)("q-btn"),G=(0,l.up)("q-toolbar-title"),J=(0,l.up)("q-toolbar"),X=(0,l.up)("q-header"),ee=(0,l.up)("q-icon"),te=(0,l.up)("q-card"),ae=(0,l.up)("q-banner"),le=(0,l.up)("q-item-section"),ie=(0,l.up)("q-item"),se=(0,l.up)("q-list"),ne=(0,l.up)("q-separator");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(X,{elevated:"",class:"containerWidth new-meter-heading breadcrumbs"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,{onClick:n[0]||(n[0]=t=>e.$router.back()),flat:"",dense:"",round:"",icon:"arrow_back","text-color":"white"}),(0,l.Wm)(G,{class:"text-white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)((0,s.SU)(a).meta.title),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(te,{flat:"",class:"bg-grey-4 q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>{var e,t,a;return[(0,l._)("div",c,[(0,l._)("div",w,[null!==(e=E.value)&&void 0!==e&&e.has_history?((0,l.wg)(),(0,l.j4)(ee,{key:0,onClick:L,name:"arrow_left",class:"icon-styling"})):((0,l.wg)(),(0,l.j4)(ee,{key:1,disabled:"",name:"arrow_left",class:"icon-styling"})),(0,l._)("span",null," Projected bill for "+(0,i.zw)(null===(t=E.value)||void 0===t?void 0:t.month),1),N.value>1?((0,l.wg)(),(0,l.j4)(ee,{key:2,onClick:B,name:"arrow_right",class:"icon-styling"})):((0,l.wg)(),(0,l.j4)(ee,{key:3,disabled:"",name:"arrow_right",class:"icon-styling"}))]),(0,l._)("span",_,(0,i.zw)(null===(a=E.value)||void 0===a?void 0:a.cycle),1),(0,l._)("span",v,"Today is "+(0,i.zw)(E.value.current_date),1)])]})),_:1}),K.value?((0,l.wg)(),(0,l.iD)("div",y,[(0,l.Wm)(ae,{dense:"","inline-actions":"",class:"text-white bg-red"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(E.value.message),1)])),_:1})])):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm water-meter-background"},{default:(0,l.w5)((()=>[f])),_:1}),null!==(r=E.value)&&void 0!==r&&null!==(m=r.meters)&&void 0!==m&&m.water_meters.length?((0,l.wg)(),(0,l.iD)("div",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((null===(o=E.value)||void 0===o||null===(d=o.meters)||void 0===d?void 0:d.water_meters)||[],(e=>((0,l.wg)(),(0,l.iD)("div",{style:{border:"1px dotted",margin:"20px"},key:e.meter_details.id},[(0,l.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>[(0,l._)("div",p,[(0,l._)("span",b,"Meter# "+(0,i.zw)(e.meter_details.meter_number),1),(0,l.Wm)(O,{onClick:a=>(0,s.SU)(t).mailCost(e),class:"q-mt-sm",style:{"margin-top":"0"},color:"blue-2",rounded:"",unelevated:"","text-color":"black",size:"sm"},{default:(0,l.w5)((()=>[k])),_:2},1032,["onClick"])])])),_:2},1024),(0,l.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{bordered:"",separator:""},{default:(0,l.w5)((()=>{var t,a,n,r,m,o;return[(0,l.Wm)(ie,{class:"item-style"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"item-styling"},{default:(0,l.w5)((()=>[W])),_:1}),(0,l.Wm)(le,{class:"text-blue-9 medium-text"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)((0,i.zw)((0,s.SU)(A).unitFormat(e.usage.predictive_monthly_usage,null===e||void 0===e||null===(t=e.meter_details)||void 0===t?void 0:t.meter_type_id)),1)]})),_:2},1024),(0,l.Wm)(le,{side:"",class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(I).numberFormat(e.data.water_in.predictive.total)),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(ie,{class:"item-style"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"item-styling"},{default:(0,l.w5)((()=>[h])),_:1}),(0,l.Wm)(le,{side:"",class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(I).numberFormat(e.data.water_out.predictive.total)),1)])),_:2},1024)])),_:2},1024),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.water_in)||void 0===a||null===(n=a.predictive)||void 0===n?void 0:n.additional_costs)||[],((e,t)=>((0,l.wg)(),(0,l.j4)(ie,{class:"item-style",key:t},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.title),1)])),_:2},1024),(0,l.Wm)(le,{side:"",class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(I).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((null===e||void 0===e||null===(r=e.data)||void 0===r||null===(m=r.water_out)||void 0===m||null===(o=m.predictive)||void 0===o?void 0:o.additional_costs)||[],((e,t)=>((0,l.wg)(),(0,l.j4)(ie,{class:"item-style",key:t},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.title),1)])),_:2},1024),(0,l.Wm)(le,{side:"",class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(I).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128))]})),_:2},1024)])),_:2},1024)])))),128))])):((0,l.wg)(),(0,l.j4)(te,{key:1,flat:"",class:"q-ma-sm q-pa-sm text-center"},{default:(0,l.w5)((()=>[q])),_:1})),(0,l.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm electricity-meter-background"},{default:(0,l.w5)((()=>[U])),_:1}),null!==(u=E.value)&&void 0!==u&&null!==(M=u.meters)&&void 0!==M&&M.electricity_meters.length?((0,l.wg)(),(0,l.iD)("div",x,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((null===(P=E.value)||void 0===P||null===(V=P.meters)||void 0===V?void 0:V.electricity_meters)||[],(e=>((0,l.wg)(),(0,l.iD)("div",{style:{border:"1px dotted",margin:"20px"},key:e.meter_details.id},[(0,l.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>[(0,l._)("div",z,[(0,l._)("span",D,"Meter# "+(0,i.zw)(e.meter_details.meter_number),1),(0,l.Wm)(O,{onClick:a=>(0,s.SU)(t).mailCost(e),class:"q-mt-sm",style:{"margin-top":"0"},color:"blue-2",rounded:"",unelevated:"","text-color":"black",size:"sm"},{default:(0,l.w5)((()=>[S])),_:2},1032,["onClick"])])])),_:2},1024),(0,l.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{bordered:"",separator:""},{default:(0,l.w5)((()=>{var t,a,n;return[(0,l.Wm)(ie,{class:"item-style"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"item-styling"},{default:(0,l.w5)((()=>[F])),_:1}),(0,l.Wm)(le,{class:"text-blue-9 medium-text"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)((0,i.zw)((0,s.SU)(A).unitFormat(e.usage.predictive_monthly_usage,null===e||void 0===e||null===(t=e.meter_details)||void 0===t?void 0:t.meter_type_id)),1)]})),_:2},1024),(0,l.Wm)(le,{side:"",class:"item-styling"},{default:(0,l.w5)((()=>{var t;return[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(I).numberFormat((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.predictive)||0)),1)]})),_:2},1024)])),_:2},1024),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.electricity)||void 0===a||null===(n=a.predictive)||void 0===n?void 0:n.additional_costs)||[],((e,t)=>((0,l.wg)(),(0,l.j4)(ie,{class:"item-style",key:t},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.title),1)])),_:2},1024),(0,l.Wm)(le,{side:"",class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(I).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128))]})),_:2},1024)])),_:2},1024)])))),128))])):((0,l.wg)(),(0,l.j4)(te,{key:3,flat:"",class:"q-ma-sm q-pa-sm text-center"},{default:(0,l.w5)((()=>[C])),_:1})),(0,l.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm additional-costs-background"},{default:(0,l.w5)((()=>[j])),_:1}),(0,l.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{bordered:"",separator:""},{default:(0,l.w5)((()=>{var e;return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((null===(e=E.value)||void 0===e?void 0:e.additional_costs)||[],((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},["no"===e.exempt_vat?((0,l.wg)(),(0,l.j4)(ie,{key:0,class:"item-style"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.name),1)])),_:2},1024),(0,l.Wm)(le,{side:"",class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(I).numberFormat(+(null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)],64)))),128))]})),_:1})])),_:1}),(0,l.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(se,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ie,{class:"item-style"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"item-styling"},{default:(0,l.w5)((()=>[H])),_:1}),(0,l.Wm)(le,{side:"",class:"item-styling"},{default:(0,l.w5)((()=>{var e;return[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(I).numberFormat(+(null===(e=E.value)||void 0===e?void 0:e.vat_exempted_subtotal)||0)),1)]})),_:1})])),_:1})])),_:1}),(0,l.Wm)(ne)])),_:1}),(0,l.Wm)(te,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(se,{bordered:""},{default:(0,l.w5)((()=>{var e;return[(0,l.Wm)(ie,{class:"item-style"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"item-styling"},{default:(0,l.w5)((()=>[R])),_:1}),(0,l.Wm)(le,{side:"",class:"item-styling"},{default:(0,l.w5)((()=>{var e;return[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(I).numberFormat(+(null===(e=E.value)||void 0===e?void 0:e.vat)||0)),1)]})),_:1})])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((null===(e=E.value)||void 0===e?void 0:e.additional_costs)||[],((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},["yes"===e.exempt_vat?((0,l.wg)(),(0,l.j4)(ie,{key:0,class:"item-style"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.name),1)])),_:2},1024),(0,l.Wm)(le,{side:"",class:"item-styling"},{default:(0,l.w5)((()=>[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(I).numberFormat(+(null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)],64)))),128)),(0,l.Wm)(ie,{class:"item-style"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{class:"item-styling"},{default:(0,l.w5)((()=>[T])),_:1}),(0,l.Wm)(le,{side:"",class:"item-styling"},{default:(0,l.w5)((()=>{var e;return[(0,l.Uk)("R "+(0,i.zw)((0,s.SU)(I).numberFormat(+(null===(e=E.value)||void 0===e?void 0:e.total_including_vat)||0)),1)]})),_:1})])),_:1})]})),_:1})])),_:1}),(0,l.Wm)(te,{flat:"",class:"bg-grey-4 q-ma-sm q-pa-sm"},{default:(0,l.w5)((()=>{var e;return[(0,l._)("div",Y,[Z,(0,l._)("span",$,"R "+(0,i.zw)((0,s.SU)(I).numberFormat((null===(e=E.value)||void 0===e?void 0:e.total_including_vat)||0)),1)])]})),_:1}),(0,l.Wm)(te,{flat:"",class:"bg-white q-ma-sm q-pa-sm",style:{"padding-bottom":"40px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(ae,{dense:"","inline-actions":"",class:"text-white bg-red"},{default:(0,l.w5)((()=>[Q])),_:1})])),_:1})],64))],64)}}};var A=a(1639),E=a(6602),K=a(1663),M=a(8879),N=a(1973),L=a(4458),B=a(2857),P=a(7128),V=a(3246),O=a(490),G=a(1233),J=a(926),X=a(9984),ee=a.n(X);const te=(0,A.Z)(I,[["__scopeId","data-v-1074d831"]]),ae=te;ee()(I,"components",{QHeader:E.Z,QToolbar:K.Z,QBtn:M.Z,QToolbarTitle:N.Z,QCard:L.Z,QIcon:B.Z,QBanner:P.Z,QList:V.Z,QItem:O.Z,QItemSection:G.Z,QSeparator:J.Z})}}]);