"use strict";(globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[]).push([[242],{3242:(e,t,l)=>{l.r(t),l.d(t,{default:()=>se});l(8964);var a=l(9835),i=l(6970),s=l(499),n=l(8339),u=l(1569);const r=(e,t)=>u.api.get(`/v1/meters/${e}/cost-estimation`,{params:{month:t}}),o=new Intl.NumberFormat("en-US",{style:"decimal"}),d=()=>({numberFormat(e){return"number"!==typeof e?e:o.format(e)}}),m=new Intl.NumberFormat("en-US"),c=()=>({unitFormat(e){return"number"!==typeof e?e:`${m.format(e)} kL`},klToLitters(e){return"number"!==typeof e?e:`${m.format(1e3*e)} L`}}),v=e=>((0,a.dD)("data-v-68635fe5"),e=e(),(0,a.Cn)(),e),_={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},w={class:"large-text"},g={class:"medium-text"},f={class:"medium-text"},p={class:"medium-text"},y={key:0,class:"q-ma-sm q-pa-sm",style:{display:"flex","justify-content":"center","align-items":"center","min-height":"300px"}},b={class:"row flex justify-between items-center"},h={class:"column col-3"},x=v((()=>(0,a._)("b",{class:"text-center"},"Daily Usage",-1))),k={class:"text-center basic-text"},q={class:"text-center basic-text"},W={class:"column col-3"},U=v((()=>(0,a._)("b",{class:"text-center"},"Monthly Usage",-1))),z={class:"text-center basic-text"},S={class:"text-center basic-text"},F={class:"column col-3"},Z=v((()=>(0,a._)("b",{class:"text-center"},"Daily Cost",-1))),j={style:{"margin-bottom":"22px"},class:"basic-text text-center"},Q=(0,a.Uk)("Water in"),C=(0,a.Uk)("Water out"),D=(0,a.Uk)("VAT"),T={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},H=v((()=>(0,a._)("span",{class:"large-text"},"Monthly Projected Cost",-1))),R={class:"large-text"},I={style:{"flex-direction":"column"},class:"flex column items-center","aria-label":"heading"},L={class:"large-text"},M={class:"large-text"},Y={class:"flex column items-center q-pt-lg","aria-label":"heading"},$=(0,a.Uk)("Email Details"),B={__name:"MeterCost",setup(e){const t=(0,n.yj)(),l=(0,n.tv)(),u=d(),o=c(),m=(0,s.iH)({});let v=t.query.month;v<0&&l.replace({...t,query:{...t.query,month:1}});const B=(0,s.iH)(t.query.month||1),K=(0,s.iH)(!1);function N(){var e;null!==(e=m.value)&&void 0!==e&&e.has_history&&(B.value++,l.push({...t,query:{...t.query,month:B.value}}))}function P(){B.value--,l.push({...t,query:{...t.query,month:B.value}})}async function A(){try{m.value=await r(t.params.id,B.value),K.value=!1}catch(e){K.value=!0,m.value=e.response.data}}return(0,a.m0)((async()=>{B.value=t.query.month||1,await A()})),(0,a.bv)((()=>{A().then()})),(e,l)=>{const n=(0,a.up)("q-btn"),r=(0,a.up)("q-toolbar-title"),d=(0,a.up)("q-toolbar"),c=(0,a.up)("q-header"),v=(0,a.up)("q-icon"),K=(0,a.up)("q-card"),A=(0,a.up)("q-banner"),E=(0,a.up)("q-separator"),V=(0,a.up)("q-item-section"),G=(0,a.up)("q-item"),J=(0,a.up)("q-list");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(c,{elevated:"",class:"containerWidth new-meter-heading breadcrumbs"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{onClick:l[0]||(l[0]=t=>e.$router.back()),flat:"",dense:"",round:"",icon:"arrow_back","text-color":"white"}),(0,a.Wm)(r,{class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)((0,s.SU)(t).meta.title),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(K,{flat:"",class:"bg-grey-4 q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>{var e,t,l,s,n;return[(0,a._)("div",_,[(0,a._)("span",w,"Meter# "+(0,i.zw)(null===(e=m.value)||void 0===e||null===(t=e.meter_details)||void 0===t?void 0:t.meter_number),1),(0,a._)("div",g,[null!==(l=m.value)&&void 0!==l&&l.has_history?((0,a.wg)(),(0,a.j4)(v,{key:0,onClick:N,name:"arrow_left",class:"icon-styling"})):((0,a.wg)(),(0,a.j4)(v,{key:1,disabled:"",name:"arrow_left",class:"icon-styling"})),(0,a._)("span",null," Projected bill for "+(0,i.zw)(null===(s=m.value)||void 0===s?void 0:s.month),1),B.value>1?((0,a.wg)(),(0,a.j4)(v,{key:2,onClick:P,name:"arrow_right",class:"icon-styling"})):((0,a.wg)(),(0,a.j4)(v,{key:3,disabled:"",name:"arrow_right",class:"icon-styling"}))]),(0,a._)("span",f,(0,i.zw)(null===(n=m.value)||void 0===n?void 0:n.cycle),1),(0,a._)("span",p,"Today is "+(0,i.zw)(m.value.current_date),1)])]})),_:1}),m.value.message?((0,a.wg)(),(0,a.iD)("div",y,[(0,a.Wm)(A,{dense:"","inline-actions":"",class:"text-white bg-red"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(m.value.message),1)])),_:1})])):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Wm)(K,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>{var e,t,l,n,r,d,c,v,_,w;return[(0,a._)("div",b,[(0,a._)("div",h,[x,(0,a._)("div",k,(0,i.zw)((0,s.SU)(o).unitFormat((null===(e=m.value)||void 0===e||null===(t=e.usage)||void 0===t?void 0:t.average_usage)||0)),1),(0,a._)("div",q,(0,i.zw)((0,s.SU)(o).klToLitters((null===(l=m.value)||void 0===l||null===(n=l.usage)||void 0===n?void 0:n.average_usage)||0)),1)]),(0,a.Wm)(E,{vertical:""}),(0,a._)("div",W,[U,(0,a._)("div",z,(0,i.zw)((0,s.SU)(o).unitFormat((null===(r=m.value)||void 0===r||null===(d=r.usage)||void 0===d?void 0:d.predictive_monthly_usage)||0)),1),(0,a._)("div",S,(0,i.zw)((0,s.SU)(o).klToLitters((null===(c=m.value)||void 0===c||null===(v=c.usage)||void 0===v?void 0:v.predictive_monthly_usage)||0)),1)]),(0,a.Wm)(E,{vertical:""}),(0,a._)("div",F,[Z,(0,a._)("div",j," R "+(0,i.zw)((0,s.SU)(u).numberFormat(0|(null===(_=m.value)||void 0===_||null===(w=_.data)||void 0===w?void 0:w.daily_predictive_cost))),1)])]),(0,a.Wm)(E,{class:"q-mt-lg"})]})),_:1}),(0,a.Wm)(K,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{bordered:"",separator:""},{default:(0,a.w5)((()=>{var e,t,l,n,r,o,d,c;return[(0,a.Wm)(G,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[Q])),_:1}),(0,a.Wm)(V,{side:""},{default:(0,a.w5)((()=>{var e,t,l;return[(0,a.Uk)("R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===(e=m.value)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.water_in)||void 0===l?void 0:l.predictive.total)||0)),1)]})),_:1})])),_:1}),(0,a.Wm)(G,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[C])),_:1}),(0,a.Wm)(V,{side:""},{default:(0,a.w5)((()=>{var e,t,l;return[(0,a.Uk)("R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===(e=m.value)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.water_out)||void 0===l?void 0:l.predictive.total)||0)),1)]})),_:1})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===(e=m.value)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.water_in)||void 0===l||null===(n=l.predictive)||void 0===n?void 0:n.additional_costs)||[],((e,t)=>((0,a.wg)(),(0,a.j4)(G,{class:"item-style",key:t},{default:(0,a.w5)((()=>[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(V,{side:""},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((null===(r=m.value)||void 0===r||null===(o=r.data)||void 0===o||null===(d=o.water_out)||void 0===d||null===(c=d.predictive)||void 0===c?void 0:c.additional_costs)||[],((e,t)=>((0,a.wg)(),(0,a.j4)(G,{class:"item-style",key:t},{default:(0,a.w5)((()=>[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(V,{side:""},{default:(0,a.w5)((()=>[(0,a.Uk)("R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===e||void 0===e?void 0:e.cost)||0)),1)])),_:2},1024)])),_:2},1024)))),128)),(0,a.Wm)(G,{class:"item-style"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[D])),_:1}),(0,a.Wm)(V,{side:""},{default:(0,a.w5)((()=>{var e,t;return[(0,a.Uk)("R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===(e=m.value)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.vat_predictive)||0)),1)]})),_:1})])),_:1})]})),_:1})])),_:1}),(0,a.Wm)(K,{flat:"",class:"bg-grey-4 q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>{var e,t;return[(0,a._)("div",T,[H,(0,a._)("span",R,"R "+(0,i.zw)((0,s.SU)(u).numberFormat((null===(e=m.value)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.predictive)||0)),1)])]})),_:1}),(0,a.Wm)(K,{flat:"",class:"q-ma-sm q-pa-sm"},{default:(0,a.w5)((()=>{var e,t,l;return[(0,a._)("div",I,[(0,a._)("span",L,"Dated: "+(0,i.zw)(null===(e=m.value)||void 0===e?void 0:e.current_date),1),(0,a._)("span",M,"Reading: "+(0,i.zw)(null===(t=m.value)||void 0===t||null===(l=t.usage)||void 0===l?void 0:l.reading),1)]),(0,a._)("div",Y,[(0,a.Wm)(n,{color:"primary",style:{width:"100%"}},{default:(0,a.w5)((()=>[$])),_:1})])]})),_:1})],64))],64)}}};var K=l(1639),N=l(6602),P=l(1663),A=l(8879),E=l(1973),V=l(4458),G=l(2857),J=l(7128),O=l(926),X=l(3246),ee=l(490),te=l(1233),le=l(9984),ae=l.n(le);const ie=(0,K.Z)(B,[["__scopeId","data-v-68635fe5"]]),se=ie;ae()(B,"components",{QHeader:N.Z,QToolbar:P.Z,QBtn:A.Z,QToolbarTitle:E.Z,QCard:V.Z,QIcon:G.Z,QBanner:J.Z,QSeparator:O.Z,QList:X.Z,QItem:ee.Z,QItemSection:te.Z})}}]);