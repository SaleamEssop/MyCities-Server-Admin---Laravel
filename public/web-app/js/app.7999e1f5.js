(()=>{"use strict";var e={531:(e,t,r)=>{r(8964),r(702);var a=r(1957),s=r(1947),n=r(499),i=r(9835);const o={class:"backgroundImage"};function d(e,t,r,a,s,n){const d=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(d)])}const c=(0,i.aZ)({name:"App",setup(){return{}}});var l=r(1639),u=r(1487),p=r(2074),g=r(4458),h=r(3190),m=r(1821),f=r(8879),v=r(2146),y=r(9984),b=r.n(y);const w=(0,l.Z)(c,[["render",d],["__scopeId","data-v-68c15472"]]),A=w;b()(c,"components",{QImg:u.Z,QDialog:p.Z,QCard:g.Z,QCardSection:h.Z,QCardActions:m.Z,QBtn:f.Z}),b()(c,"directives",{ClosePopup:v.Z});var _=r(3340),C=r(3746),P=r(3703),k=r(5926);const O=(0,_.h)((()=>{const e=(0,C.WB)();return e.use((0,k.x)(P.Z)),e}));var S=r(8339);const R=[{path:"/",component:()=>Promise.all([r.e(736),r.e(875)]).then(r.bind(r,7875)),children:[{path:"",component:()=>Promise.all([r.e(736),r.e(57)]).then(r.bind(r,2057)),name:"home",meta:{title:"Home",meta:{requiresAuth:!0}}},{path:"/send_reading/",component:()=>Promise.all([r.e(736),r.e(915)]).then(r.bind(r,8915)),children:[{path:"",component:()=>Promise.all([r.e(736),r.e(693)]).then(r.bind(r,5693)),name:"send_reading",meta:{title:"Manage",meta:{requiresAuth:!0}}}]}]},{path:"/auth",component:()=>Promise.all([r.e(736),r.e(434)]).then(r.bind(r,4434)),children:[{path:"/auth/login",component:()=>Promise.all([r.e(736),r.e(976)]).then(r.bind(r,9976))}]},{path:"/:catchAll(.*)*",component:()=>r.e(278).then(r.bind(r,3278)),name:"Error"}],M=R,x=(0,_.BC)((function(){const e=S.r5,t=(0,S.p7)({scrollBehavior:()=>({left:0,top:0}),routes:M,history:e("/web-app/")});return t}));async function E(e,t){const r=e(A);r.use(s.Z,t);const a="function"===typeof O?await O({}):O;r.use(a);const i=(0,n.Xl)("function"===typeof x?await x({store:a}):x);return a.use((({store:e})=>{e.router=i})),{app:r,store:a,router:i}}var T=r(1005),I=r(1136),j=r(6827),L=r(4006),Z=r(1530),U=r(6950);const N={config:{},components:{QVideo:T.Z},directives:{Ripple:I.Z},plugins:{Notify:j.Z,Cookies:L.Z,LocalStorage:P.Z,Dialog:Z.Z,Loading:U.Z}},Q="/web-app/",B=/\/\//,F=e=>(Q+e).replace(B,"/");async function D({app:e,router:t,store:r},a){let s=!1;const n=e=>{try{return F(t.resolve(e).href)}catch(r){}return Object(e)===e?null:e},i=e=>{if(s=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=n(e);null!==t&&(window.location.href=t,window.location.reload())},o=window.location.href.replace(window.location.origin,"");for(let c=0;!1===s&&c<a.length;c++)try{await a[c]({app:e,router:t,store:r,ssrContext:null,redirect:i,urlPath:o,publicPath:Q})}catch(d){return d&&d.url?void i(d.url):void console.error("[Quasar] boot error:",d)}!0!==s&&(e.use(t),e.mount("#q-app"))}E(a.ri,N).then((e=>Promise.all([Promise.resolve().then(r.bind(r,1569)),Promise.resolve().then(r.bind(r,4547)),Promise.resolve().then(r.bind(r,8083))]).then((t=>{const r=t.map((e=>e.default)).filter((e=>"function"===typeof e));D(e,r)}))))},4547:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var a=r(3340),s=r(4880);const n=(0,a.xr)((async({app:e,router:t})=>{e.component("LMap",s.iA),e.component("LMarker",s.$R),e.component("LTileLayer",s.Hw),e.config.globalProperties.$METER_TYPES=Object.freeze([{title:"Water",id:1,thumbnail:"https://media.istockphoto.com/vectors/water-faucet-icon-vector-vector-id604383296?k=20&m=604383296&s=612x612&w=0&h=rAPcq11vU1posV21tn1d6Tu6NeNIC0sGUwJ6gPZ8oW0="},{title:"Electricity",id:2,thumbnail:"https://cdn3.iconfinder.com/data/icons/wsd-power/512/power-09-512.png"}])}))},1569:(e,t,r)=>{r.r(t),r.d(t,{SERVER_URL:()=>g,addMeterAndReading:()=>P,addReadingInMeter:()=>S,addSiteAndAccount:()=>_,api:()=>h,default:()=>F,defaultCost:()=>I,deleteMainAccount:()=>x,deleteMainMeter:()=>E,deleteMeterReadings:()=>T,fetchAndSaveMeterOnAccount:()=>B,findAddressCandidates:()=>y,findEmailFromLocation:()=>b,forgotPasswordVerification:()=>L,forgotPasswordVerificationCode:()=>Z,getAds:()=>M,getAlarms:()=>j,getAllData:()=>k,locationApi:()=>m,resetNewPassword:()=>U,suggestLocation:()=>v,updateAccount:()=>C,updateReadingInMeter:()=>R,userLogin:()=>w,userSignUp:()=>A});r(702);var a=r(3340),s=r(9981),n=r.n(s),i=r(6144),o=r(6190),d=r(9428),c=r(7594);const l=(0,i.L)(),u=((0,o.c)(),(0,d.b)()),p=(0,c.H)(),g="",h=n().create({baseURL:`${g}/api`});h.interceptors.request.use((e=>(e.headers["Authorization"]=`Bearer ${l.getToken}`,e))),h.interceptors.response.use((e=>e.data));const m=n().create({baseURL:"https://geocode-api.arcgis.com"}),f="AAPKc12c49d88ad5489486e82db8ebefb94aXNVU8kLARKQJ0rA5KFeUOYRjHqTU9l2phoZf1pFANCXNR-hkFOOQJmeFUYp4nnzQ",v=async e=>await m.get(`/arcgis/rest/services/World/GeocodeServer/suggest?f=pjson&token=${f}&text=${e}`),y=async(e,t)=>await m.get(`/arcgis/rest/services/World/GeocodeServer/findAddressCandidates?f=pjson&token=${f}&singleLine=${e}&magicKey=${t}&outSR=%7B%22wkid%22%3A102100%7D&countryCode=ZAF`),b=async e=>{let t={f:"json",returnGeometry:!1,spatialRel:"esriSpatialRelIntersects",geometryType:"esriGeometryPoint",geometry:e,inSR:102100,outFields:"*",outSR:102100};return await n().create({baseURL:"https://services3.arcgis.com"}).get("/HO0zfySJshlD6Twu/arcgis/rest/services/MeterReadingSuburbs/FeatureServer/0/query",{params:t})},w=async e=>await h.post("/v1/user/login",e),A=async e=>await h.post("/v1/user/register",e),_=async e=>await h.post("/v1/account/add",{user_id:l.getUser.id,...e}),C=async e=>await h.post("/v1/account/update",{user_id:l.getUser.id,...e}),P=async e=>h.post("/v1/meter/add",e),k=async()=>{var e;return await h.get(`/v1/all-data?user_id=${null===(e=l.getUser)||void 0===e?void 0:e.id}`)},O=async e=>await h.get(`/v1/meter/get?account_id=${e}`),S=async e=>await h.post("/v1/meter/add-readings",e),R=async e=>await h.post("/v1/meter/update-readings",e),M=async()=>await h.get("/v1/ads/get-categories"),x=async e=>await h.post("/v1/account/delete",e),E=async e=>await h.post("/v1/meter/delete",e),T=async e=>{const t=new FormData;return e&&t.append("reading_id",e.reading_id),await h.post("/v1/meter/delete-readings",t)},I=async()=>await h.get("/v1/default-cost/get"),j=async()=>await h.get("/v1/get-alarms"),L=async e=>await h.post("/v1/forgot-password/email-verification",e),Z=async e=>await h.post("/v1/forgot-password/verify-code",e),U=async e=>await h.post("/v1/forgot-password/reset-password",e),N="https://media.istockphoto.com/vectors/water-faucet-icon-vector-vector-id604383296?k=20&m=604383296&s=612x612&w=0&h=rAPcq11vU1posV21tn1d6Tu6NeNIC0sGUwJ6gPZ8oW0=",Q="https://cdn3.iconfinder.com/data/icons/wsd-power/512/power-09-512.png",B=e=>{O(e).then((({status:t,data:r})=>{if(t){const t=r.reduce(((e,t)=>{const r=t,a=2==r.meter_type_id?10:1e4,s=t.readings.map((e=>({id:e.id,meter:{id:e.meter_id},time:new Date(e.reading_date).getTime(),value:parseFloat(e.reading_value)/a,valueInString:e.reading_value})));return e.readings.push(...s),e.meters.push({account:{id:r.account_id},id:r.id,number:r.meter_number,title:r.meter_title,type:{id:r.meter_type_id,title:r.meter_title,thumbnail:2===r.meter_type_id?Q:N}}),delete t.readings,e}),{meters:[],readings:[]});u.saveMeterByAccountId(t.meters,e),p.saveReadings(t.readings)}}))},F=(0,a.xr)((({app:e})=>{e.config.globalProperties.$axios=n(),e.config.globalProperties.$api=h,e.config.globalProperties.$locationApi=m}))},8083:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y,updateAllData:()=>v});r(8964);var a=r(3340),s=(r(6234),r(6144)),n=r(7208),i=r(6190),o=r(7047),d=r(1569),c=r(4710),l=r(5157);const u=(0,s.L)(),p=(0,n.H)(),g=(0,i.c)(),h=(0,o.H)(),m=(0,c.t)(),f=(0,l.c)(),v=()=>{(0,d.getAllData)().then((({status:e,data:t})=>{const r=t.reduce(((e,t)=>(e.accounts=e.accounts.concat(t.account.map((e=>({title:e.account_name,id:e.id,number:e.account_number,option:e.optional_information,site:{id:e.site_id},fixedCosts:e.fixed_costs.map((e=>({title:e.title,value:parseFloat(e.value),isApplicable:1==e.is_active,isFromUser:!0,id:e.id}))),defaultFixedCost:e.default_fixed_costs})))),t["latLng"]={lat:t.lat,lng:t.lng},delete t.account,delete t.lat,delete t.lng,e.sites.push(t),e)),{sites:[],accounts:[]});p.replace(r.sites),g.replace(r.accounts)})),(0,d.getAds)().then((({data:e})=>{h.setAds(e)})),(0,d.defaultCost)().then((({data:e})=>{m.setDefaultCost(e)})),(0,d.getAlarms)().then((({data:e})=>{f.setAlarms(e)}))},y=(0,a.xr)((async({router:e,app:t})=>{v(),e.beforeEach(((e,t,r)=>{const a=u.getUser;a||"/auth/login"==e.path?a&&("/auth/login"==e.path||"/auth/verifyEmail"==e.path||"/auth/completeAccount"==e.path)?r("/"):r():r("/auth/login")}))}))},6190:(e,t,r)=>{r.d(t,{c:()=>s});var a=r(3746);const s=(0,a.Q_)("account",{state:()=>({account:0,selectedAccount:null,accounts:[]}),getters:{allAccounts:e=>e.accounts},actions:{addAccount(e){this.accounts.push(e)},getAccountsById(e){return this.accounts.filter((e=>void 0==e["deletedAt"]||null==e["deletedAt"])).filter((({site:t})=>t.id==e))},getAccountById(e){return this.accounts.filter((e=>void 0==e["deletedAt"]||null==e["deletedAt"])).find((({id:t})=>t==e))},update(e){const t=this.accounts.findIndex((({id:t})=>t==e.id));this.accounts[t]=e},deleteAccount(e){let t=this.accounts.findIndex((({id:t})=>(this.selectedAccount=null,e.id==t)));this.accounts[t]["deletedAt"]=Date.now(),t>-1&&this.accounts.splice(t,1)},replace(e){this.accounts=e}},persist:!0})},7047:(e,t,r)=>{r.d(t,{H:()=>s});r(702);var a=r(3746);const s=(0,a.Q_)("ads",{state:()=>({ads:[]}),getters:{getAds:e=>e.ads},actions:{setAds(e){this.ads=e}},persist:!0})},5157:(e,t,r)=>{r.d(t,{c:()=>s});var a=r(3746);const s=(0,a.Q_)("alarms",{state:()=>({alarms:[]}),getters:{getAlarms:e=>e.alarms},actions:{setAlarms(e){this.alarms=e}},persist:!0})},4710:(e,t,r)=>{r.d(t,{t:()=>s});var a=r(3746);const s=(0,a.Q_)("defaultCost",{state:()=>({defaultCost:[]}),getters:{getDefaultCost:e=>e.defaultCost},actions:{setDefaultCost(e){this.defaultCost=e}},persist:!0})},9428:(e,t,r)=>{r.d(t,{b:()=>n});r(702);var a=r(3746),s=r(9835);const n=(0,a.Q_)("meter",{state:()=>({selectedMeter:null,meters:[]}),getters:{allMeters:e=>{const t=e.meters;return t.map((e=>{const t=(0,s.FN)().appContext.config.globalProperties.$METER_TYPES;return e.type=t.find((t=>t.id==e.type.id)),e}))}},actions:{addMeter(e){this.meters.push(e)},getByAccuntId(e){return this.allMeters.filter((({account:t})=>t.id==e)).filter((e=>void 0==e["deletedAt"]||null==e["deletedAt"]))},getMeterById(e){return this.allMeters.find((({id:t})=>t==e))},deleteMeter(e){let t=this.meters.findIndex((({id:t})=>(this.selectedMeter=null,e.id==t)));this.meters[t]["deletedAt"]=Date.now(),t>-1&&this.meters.splice(t,1)},saveMeterByAccountId(e,t){const r=this.getByAccuntId(t);r.forEach((e=>{let t=this.meters.findIndex((({id:t})=>e.id==t));t>-1&&this.meters.splice(t,1)})),this.meters.push(...e)}},persist:!0})},7594:(e,t,r)=>{r.d(t,{H:()=>n});r(702);var a=r(3746);const s=(e,t,r)=>e.reduce(((e,a)=>({...e,[a[t][r]]:(e[a[t][r]]||[]).concat(a)})),{}),n=(0,a.Q_)("reading",{state:()=>({readings:[]}),getters:{},actions:{addReading(e){this.readings.push(e)},updateReading(e){this.delete(e.time,e.meter.id),this.addReading(e)},deleteReadings(e){let t=this.readings.findIndex((({id:t})=>e==t));t>-1&&this.readings.splice(t,1)},delete(e,t){const r=this.readings.findIndex((r=>r.time==e&&r.meter.id===t));this.readings.splice(r,1)},getReadingsByMeterId(e){return this.readings.filter((({meter:t})=>t.id==e)).sort(((e,t)=>t.time-e.time))},saveReadings(e){const t=s(e,"meter","id");this.readings=this.readings.filter((e=>!(void 0==e.meter.id||void 0!==t[e.meter.id]))),this.readings.push(...e)}},persist:!0})},7208:(e,t,r)=>{r.d(t,{H:()=>s});var a=r(3746);const s=(0,a.Q_)("site",{state:()=>({selectedSite:null,sites:[]}),getters:{allSites:e=>e.sites},actions:{addSite(e){this.sites.push(e)},getSiteById(e){return this.sites.filter((({id:t})=>t==e))[0]},replace(e){this.sites=e}},persist:!0})},6144:(e,t,r)=>{r.d(t,{L:()=>n});var a=r(3746);const s=(0,a.eN)(),n=(0,a.Q_)("user",{state:()=>({user:null,authToken:null}),getters:{getUser:e=>e.user,getToken:e=>e.authToken},actions:{setUser(e,t){this.user=e,this.authToken=t},signOut(){s._s.forEach((e=>e.$reset()))}},persist:!0})}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,r),n.exports}r.m=e,(()=>{var e=[];r.O=(t,a,s,n)=>{if(!a){var i=1/0;for(l=0;l<e.length;l++){for(var[a,s,n]=e[l],o=!0,d=0;d<a.length;d++)(!1&n||i>=n)&&Object.keys(r.O).every((e=>r.O[e](a[d])))?a.splice(d--,1):(o=!1,n<i&&(i=n));if(o){e.splice(l--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[a,s,n]}})(),(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return r.d(t,{a:t}),t}})(),(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(a,s){if(1&s&&(a=this(a)),8&s)return a;if("object"===typeof a&&a){if(4&s&&a.__esModule)return a;if(16&s&&"function"===typeof a.then)return a}var n=Object.create(null);r.r(n);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&a;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>i[e]=()=>a[e]));return i["default"]=()=>a,r.d(n,i),n}})(),(()=>{r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,a)=>(r.f[a](e,t),t)),[]))})(),(()=>{r.u=e=>"js/"+e+"."+{57:"41a6bdd9",278:"1e2a1b67",434:"ef7fa0e6",693:"55984034",875:"4c507412",915:"f4dd8eb7",976:"d556b53e"}[e]+".js"})(),(()=>{r.miniCssF=e=>"css/"+({143:"app",736:"vendor"}[e]||e)+"."+{57:"e6ad8838",143:"405bcd4e",693:"0a67905c",736:"40bb6f57",875:"602eb650",915:"fff333c2",976:"fff0820d"}[e]+".css"})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="com.smart.meter.reading:";r.l=(a,s,n,i)=>{if(e[a])e[a].push(s);else{var o,d;if(void 0!==n)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+n){o=u;break}}o||(d=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+n),o.src=a),e[a]=[s];var p=(t,r)=>{o.onerror=o.onload=null,clearTimeout(g);var s=e[a];if(delete e[a],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(r))),t)return t(r)},g=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),d&&document.head.appendChild(o)}}})(),(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{r.p="/web-app/"})(),(()=>{var e=(e,t,r,a)=>{var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var n=n=>{if(s.onerror=s.onload=null,"load"===n.type)r();else{var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.href||t,d=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");d.code="CSS_CHUNK_LOAD_FAILED",d.type=i,d.request=o,s.parentNode.removeChild(s),a(d)}};return s.onerror=s.onload=n,s.href=t,document.head.appendChild(s),s},t=(e,t)=>{for(var r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var s=r[a],n=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(n===e||n===t))return s}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){s=i[a],n=s.getAttribute("data-href");if(n===e||n===t)return s}},a=a=>new Promise(((s,n)=>{var i=r.miniCssF(a),o=r.p+i;if(t(i,o))return s();e(a,o,s,n)})),s={143:0};r.f.miniCss=(e,t)=>{var r={57:1,693:1,875:1,915:1,976:1};s[e]?t.push(s[e]):0!==s[e]&&r[e]&&t.push(s[e]=a(e).then((()=>{s[e]=0}),(t=>{throw delete s[e],t})))}})(),(()=>{var e={143:0};r.f.j=(t,a)=>{var s=r.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else{var n=new Promise(((r,a)=>s=e[t]=[r,a]));a.push(s[2]=n);var i=r.p+r.u(t),o=new Error,d=a=>{if(r.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var n=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",o.name="ChunkLoadError",o.type=n,o.request=i,s[1](o)}};r.l(i,d,"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,a)=>{var s,n,[i,o,d]=a,c=0;if(i.some((t=>0!==e[t]))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(d)var l=d(r)}for(t&&t(a);c<i.length;c++)n=i[c],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(l)},a=globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=r.O(void 0,[736],(()=>r(531)));a=r.O(a)})();